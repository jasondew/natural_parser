
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>Natural in Batch Mode</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="ops-batchmode"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../ops/ops-batchmode.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/ops/ops-batchmode.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-natbpmon.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-char.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Operations&nbsp;&nbsp;&#8212;</span></div>
      </div> 
         
      <div class="nospytext">
         <h1> 
                <a name="x136"></a>Natural in Batch Mode
         </h1>
      </div> 
          
      <p>This document contains special considerations that apply when running
              Natural in batch mode. It covers the following topics:
              
      </p>
      <ul>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-whatis">What is Batch Mode?</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-start">Starting a Natural Session in Batch Mode</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-terminate">Terminating a Natural Session in Batch Mode</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-using">Using Natural in Batch Mode</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-sample">Sample Session for Batch Mode</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-detect">Batch Mode Detection</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-restrictions">Batch Mode Restrictions</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-simulation">Batch Mode Simulation</a></p>
         </li>
      </ul> 
         
      <hr>
      <div><a name="ops-batch-whatis"></a></div> 
          
      <h2>What is Batch Mode?</h2> 
           
           
      <p>Natural distinguishes between two processing modes:</p> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">interactive mode (via the Natural Main Menu)</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">batch mode</p> 
                  
         </li> 
              
      </ul> 
           
      <p>The main difference between these two modes is that in interactive
               mode, the commands and data are input by the user by means of the keyboard and
               the output is displayed on a screen. In batch mode, input is read from a file
               and output is written to a file - without user interaction.
      </p> 
           
      <p>When Natural is run as a batch job, no interaction between Natural and
               the person who submitted the batch job is necessary. The batch job consists of
               programs that are executed sequentially and that receive sequential input
               data.
      </p> 
           
      <p>Batch mode is useful for mass data processing on a regular basis.</p> 
          
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-start"></a></div> 
          
      <h2> 
              <a name="x137"></a>Starting a Natural Session in Batch Mode
      </h2> 
           
           
      <p>Batch mode is activated with the parameter
               <a href="../parms/batchmode.htm"><code>BATCHMODE</code></a>. 
      </p> 
           
      <p class="to"><img src="../graphics/bluearro.png" alt="Start of instruction set" width="18" height="15"><strong>To start a Natural session in batch mode</strong></p>
      <ol class="steps">
         <li> 
                    
                    
            <p class="instep"> Start Natural with the <a href="ops-parms.htm#ops-parms-dyn">dynamic</a> parameter
                        <code>BATCHMODE</code> as shown below:
            </p><pre class="command-input">natural BATCHMODE</pre>  
                     
                    
                    
                    <p class="instep">The above call (where only the <code>BATCHMODE</code>
                        parameter is specified) assumes that the required input and output channels
                        have already been defined in the Configuration Utility. For information on the
                        input and output channels, see <a href="ops-batchmode.htm#ops-batch-using">Using Natural in Batch
                  Mode</a> later in this section). For information on the
                        batch-mode-relevant profile parameters in the parameter file, see
                        <a href="../config/cfg-profileparm.htm#cfg-prf-exe-batch">Batch
                  Mode</a> in the <a href="../config/cfg-over.htm">Configuration
                  Utility</a> documentation.
            </p> 
                    
            <p class="instep">It is also possible to add the required input and output channels as
                        dynamic parameters to the above call. This is illustrated in
                        <a href="ops-batchmode.htm#ops-batch-sample">Sample Session for Batch
                  Mode</a> later in this section. Any input and output channels
                        that are specified as dynamic parameters with the above call override the
                        channel definitions in the parameter file.
            </p> 
                    
                  
         </li>
         <li> 
                    
                    
            <p class="instep">Check the file which has been defined as the output channel. At its
                        end, this file should contain the message that your session has terminated
                        normally.
            </p> 
                    
                  
         </li>
      </ol> 
          
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-terminate"></a></div> 
          
      <h2> 
              <a name="x138"></a>Terminating a Natural Session in Batch Mode
      </h2> 
           
           
      <p>A Natural session in batch mode is terminated when one of the following
               is encountered during the session: 
      </p> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">the system command <a href="../syscom/fin.htm"><code>FIN</code></a> in the
                       <a href="ops-batchmode.htm#ops-batch-channels">batch input file</a>, or
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">a <a href="../sm/terminat.htm"><code>TERMINATE</code></a> statement in a
                       Natural program which is being executed. 
            </p> 
                  
         </li> 
              
      </ul> 
           
      <p class="note"><strong>Note:</strong><br>When an end-of-input condition occurs in the batch input file, the
               batch session is also terminated. In this case, the file which has been defined
               as the output channel contains a message which indicates an unexpected
               end.
      </p> 
          
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-using"></a></div> 
          
      <h2>Using Natural in Batch Mode</h2> 
           
      <p>To <a href="ops-batchmode.htm#ops-batch-start">start</a> a Natural
               session in batch mode you have to specify the dynamic parameter
               <code>BATCHMODE</code>. In addition, input and output channels have
               to be defined as described below. 
      </p> 
           
      <p class="important"><strong>Important:</strong><br>The input channels <code>CMSYNIN</code> and/or
               <code>CMOBJIN</code> and the output channel
               <code>CMPRINT</code> are always required for batch mode.
      </p> 
           
      <p>The following topics are covered
               below:
      </p>
      <ul>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-channels">Input and Output Channels</a></p>
         </li>
         <li>
            <p class="initem"><a href="ops-batchmode.htm#ops-batch-codepages">Code Pages for the Input and Output Files</a></p>
         </li>
      </ul>
      <div><a name="ops-batch-channels"></a></div> 
           
      <h3> 
               <a name="x139"></a> 
               <a name="x140"></a> 
               <a name="x141"></a>Input and Output Channels
      </h3> 
            
            
      <p>The following parameters are available for batch mode: </p> 
             
             
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
         <thead align="left" valign="top"> 
                     
            <tr> 
                         
               <th>Parameter</th> 
                         
               <th>Description</th> 
                        
            </tr> 
                    
         </thead> 
                 
         <tbody align="left" valign="top"> 
                     
            <tr> 
                         
               <td> 
                  <a name="x142"></a><a href="../parms/cmsynin.htm"><code>CMSYNIN</code></a></td> 
                         
               <td>Defines the batch input file which contains the
                  Natural commands and (optionally) data to be read by
                  <a href="../sm/input.htm"><code>INPUT</code></a> statements during
                             execution of Natural programs. 
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x143"></a><a href="../parms/cmobjin.htm"><code>CMOBJIN</code></a></td> 
                         
               <td>Defines the batch input file which contains the
                  data to be read by <a href="../sm/input.htm"><code>INPUT</code></a> statements. This data can
                           alternatively be placed in the file defined with the parameter
                             <code>CMSYNIN</code>, immediately following the relevant
                             <a href="../syscom/run.htm"><code>RUN</code></a> or
                             <a href="../syscom/execute.htm"><code>EXECUTE</code></a>
                             command.
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x144"></a><a href="../parms/cmprint.htm"><code>CMPRINT</code></a></td> 
                         
               <td>Defines the batch output file for the output
                  resulting from <a href="../sm/display.htm"><code>DISPLAY</code></a>,
                             <a href="../sm/printsm.htm"><code>PRINT</code></a> and
                             <a href="../sm/write.htm"><code>WRITE</code></a> statements in a
                             Natural program.
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x145"></a><a href="../parms/cmprtnn.htm"><code>CMPRT<var>nn</var></code></a></td>
                         
                         
               <td>Defines an output file for additional reports
                  referenced by any Natural program executed during the session.
                  <var>nn</var> is a two-digit decimal number in the range from
                             01 to 31 which corresponds to the report number used in a
                             <a href="../sm/display.htm"><code>DISPLAY</code></a>,
                             <a href="../sm/printsm.htm"><code>PRINT</code></a> or
                             <a href="../sm/write.htm"><code>WRITE</code></a> statement.
                             
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x146"></a><a href="../parms/cmwrknn.htm"><code>CMWRK<var>nn</var></code></a></td>
                         
                         
               <td>Defines a work file referenced by any Natural
                  program executed during the session. <var>nn</var> is a
                  two-digit decimal number in the range from 01 to 32 which corresponds to the
                             number used in a <a href="../sm/readwork.htm"><code>READ WORK
                                   FILE</code></a> or <a href="../sm/writewor.htm"><code>WRITE WORK
                                   FILE</code></a> statement.
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x147"></a><a href="../parms/natlog.htm"><code>NATLOG</code></a></td> 
                         
               <td>Used to log messages that could not be written
                  to the batch output file defined with the parameter
                  <code>CMPRINT</code>. It is recommended to enable
                             <code>NATLOG</code> in batch mode.
               </td> 
                        
            </tr> 
                    
         </tbody> 
                
      </table> 
             
           
      <div><a name="ops-batch-codepages"></a></div> 
           
      <h3> 
               <a name="x148"></a>Code Pages for the Input and Output Files
      </h3> 
            
            
      <p>The following parameters are used to specify the code pages in which
                the input files are encoded and in which the output file shall be encoded.
      </p> 
             
             
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
         <thead align="left" valign="top"> 
                     
            <tr> 
                         
               <th>Parameter</th> 
                         
               <th>Description</th> 
                        
            </tr> 
                    
         </thead> 
                 
         <tbody align="left" valign="top"> 
                     
            <tr> 
                         
               <td> 
                  <a name="x149"></a><a href="../parms/cpsynin.htm"><code>CPSYNIN</code></a></td> 
                         
               <td>Specifies the code page in which the batch
                  input file for commands is encoded. This file is defined with the parameter
                  <a href="../parms/cmsynin.htm"><code>CMSYNIN</code></a>.
                             
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x150"></a><a href="../parms/cpobjin.htm"><code>CPOBJIN</code></a></td> 
                         
               <td>Specifies the code page in which the batch
                  input file for data is encoded. This file is defined with the parameter
                  <a href="../parms/cmobjin.htm"><code>CMOBJIN</code></a>.
                             
               </td> 
                        
            </tr> 
                     
            <tr> 
                         
               <td> 
                  <a name="x151"></a><a href="../parms/cpprint.htm"><code>CPPRINT</code></a></td> 
                         
               <td>Specifies the code page in which the batch
                  output file shall be encoded. This file is defined with the parameter
                  <a href="../parms/cmprint.htm"><code>CMPRINT</code></a>.
                             
               </td> 
                        
            </tr> 
                    
         </tbody> 
                
      </table> 
             
            
      <p>Encoding for <code>CMSYNIN</code> and
                <code>CMOBJIN</code>:
      </p> 
            
      <ul> 
                
         <li> 
                    
            <p class="initem">If a code page is specified for one of the input files
                        <code>CMSYNIN</code> or <code>CMOBJIN</code>, it is assumed
                        that the data in the input file is encoded using this code page. 
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If no code page is specified for one of the input files
                        <code>CMSYNIN</code> or <code>CMOBJIN</code>, it is assumed
                        that the data in the input file is encoded using the default code page
                        specified in the Natural parameter <a href="../parms/cp.htm"><code>CP</code></a>. 
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If no code page is specified in the Natural parameter
                        <code>CP</code>, it is assumed that the data in the input file is
                        encoded using the current system code page. 
            </p> 
                   
         </li> 
               
      </ul> 
            
      <p>Encoding for <code>CMPRINT</code>:
      </p> 
            
      <ul> 
                
         <li> 
                    
            <p class="initem">If a code page is specified for the output file
                        <code>CMPRINT</code>, the output data will be encoded using this code
                        page. 
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If no code page is specified for the output file
                        <code>CMPRINT</code>, the output data will be encoded using the
                        default code page specified in the Natural parameter
                        <a href="../parms/cp.htm"><code>CP</code></a>. 
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If no code page is specified in the Natural parameter
                        <code>CP</code>, the output data will be encoded using the current
                        system code page. 
            </p> 
                   
         </li> 
               
      </ul> 
            
      <p>If the encoding/decoding fails (for instance if a character is written
                to <code>CMPRINT</code> that is not contained in the code page used
                to encode the file), the batch job terminates with a startup error 42 (batch
                mode driver error) that specifies the file on which the encoding/decoding error
                occurred. 
      </p> 
            
      <p>Note that it is possible in particular to specify UTF-8 as code page
                in each of these parameters. This allows for reading and writing Unicode data
                encoded in UTF-8. 
      </p> 
           
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-sample"></a></div> 
          
      <h2>Sample Session for Batch Mode</h2> 
           
           
      <p>This example demonstrates how to start Natural in batch mode. A simple
               Natural program is executed and data items are taken from the batch input file.
               After the items are processed with the <code>INPUT</code> statement, a
               <code>DISPLAY</code> statement follows, which writes the data to the batch
               output file. Then, Natural terminates. 
      </p> 
           
      <p>This example uses the program <code>RECCONT</code> which is stored in
               the library <code>SYSEXBAT</code>.
      </p> 
           
      <p class="note"><strong>Note:</strong><br>See the text <code>A-README</code> in the library
               <code>SYSEXBAT</code> for information on the objects that are stored in this
               library.
      </p> 
           
      <p>The sample session is invoked with the following call:</p> <pre class="command-input">natural BATCHMODE CMSYNIN=cmd.txt CMOBJIN=data.txt CMPRINT=out.txt NATLOG=ALL</pre>  
           <p class="note"><strong>Note:</strong><br>This call assumes that all files can be found in the current
               directory and that the output is written to this directory. If the files are
               located in different directories or if the output is to be written to a
               different directory, you have to specify the path.
      </p> 
           
      <p>The parameters in the above call are described below:</p> 
           
      <dl> 
                
                
         <dt><a name="d0e11304"><strong><code>BATCHMODE</code></strong></a></dt>
         <dd> 
                    
            <p class="definition">The parameter <code>BATCHMODE</code> enables batch mode
                        and sets the value of the system variable
                        <a href="../vari/natenv.htm#DEVICE"><code>*DEVICE</code></a>
                        to "BATCH".
            </p>
         </dd> 
                
                
                
         <dt><a name="d0e11325"><strong><code>CMSYNIN=cmd.txt</code></strong></a></dt>
         <dd> 
                    
            <p class="definition">The batch input file <cite>cmd.txt</cite> is a text file
                        which is stored in your file system. The content of this file is shown below.
                        It contains Natural system commands for logging on to the library
                        <code>SYSEXBAT</code>, executing the Natural program <code>RECCONT</code>, and
                        terminating the Natural session.
            </p> 
                    <pre class="verbatim">LOGON SYSEXBAT
EXECUTE RECCONT
FIN</pre> 
                    <p class="definition">The Natural program <code>RECCONT</code> has the following
                        content:
            </p> 
                    <pre class="verbatim">DEFINE DATA
LOCAL
  1 #firstname   (A10)
  1 #lastname    (A10)
END-DEFINE
INPUT (IP=OFF AD=M) #firstname #lastname
DISPLAY #firstname #lastname
END</pre> 
                   </dd> 
                
                
                
         <dt><a name="d0e11358"><strong><code>CMOBJIN=data.txt</code></strong></a></dt>
         <dd> 
                    
            <p class="definition">The <code>INPUT</code> statement in the program <code>RECCONT</code>
                        uses the data which is defined in the batch input file
                        <cite>data.txt</cite>. This is a text file which is stored in your file
                        system. The content of this file is shown below.
            </p> 
                    <pre class="verbatim">Ben %
Smith</pre> 
                    <p class="note"><strong>Note:</strong><br>The character "%" indicates that the
                        information continues in the next line. 
            </p>
         </dd> 
                
                
                
         <dt><a name="d0e11387"><strong><code>CMPRINT=out.txt</code></strong></a></dt>
         <dd> 
                    
            <p class="definition">The <code>DISPLAY</code> statement in the program
                        <code>RECCONT</code> writes the data to the batch output file
                        <cite>out.txt</cite> which is created in your file system. The content
                        of this file is shown below:
            </p> <pre class="system-output">NEXT LOGON SYSEXBAT
Logon accepted to library SYSEXBAT.
NEXT EXECUTE RECCONT

                      
DATA Ben %
DATA Smith
Page     1                                                   25.04.05  13:39:09 

#FIRSTNAME #LASTNAME                                                            
---------- ----------                                                           

Ben        Smith                                                                
NEXT FIN
NAT9995 Natural session terminated normally.</pre> 
                   </dd> 
                
                
                
         <dt><a name="d0e11411"><strong><code>NATLOG=ALL</code></strong></a></dt>
         <dd> 
                    
            <p class="definition">When you invoke the sample session with the above call, a log file
                        is created with contains all types of messages (which also includes the names
                        of the batch input and outfile files). The log file is normally created in
                        Natural's <a href="../config/cfg-confparm.htm#cfg-cf-loc-install">temporary
                           directory</a> which is defined in the local configuration file. See also
                        the description of the <a href="../parms/natlog.htm"><code>NATLOG</code></a>
                        parameter.
            </p>
         </dd> 
                
              
      </dl> 
           
      <p>The image below illustrates the different ways in which Natural reads
               input and writes output in batch mode.
      </p> 
           
      <p><img src="graphics/ops-batchmode.png" alt="Batch mode" width="500" height="470"></p> 
           
      <p>As shown in the above graphic, you can proceed in one of the following
               ways:
      </p> 
           
      <ul> 
               
         <li> 
                    
                   
            <p class="initem"><strong>CMOBJIN and
                          CMSYNIN</strong><br>Different files are used for batch input. One file contains the
                       Natural commands and the other file contains the data:
            </p><pre class="command-input">natural BATCHMODE CMSYNIN=cmd.txt CMOBJIN=data.txt CMPRINT=out.txt</pre>  
                  </li> 
               
         <li> 
                    
                   
            <p class="initem"><strong>CMSYNIN</strong><br>One file is used for batch input. It contains both the Natural
                       commands and data:
            </p><pre class="command-input">natural BATCHMODE CMSYNIN=data.txt CMOBJIN=data.txt CMPRINT=out.txt</pre>  
                   <p class="note"><strong>Note:</strong><br>Even though only one batch input file is used, both parameters
                       <code>CMSYNIN</code> and <code>CMOBJIN</code> have to be
                       specified. Both parameters must refer to the same file.
            </p> 
                  
         </li> 
               
         <li> 
                    
                   
            <p class="initem"><strong>CMOBJIN and
                          STACK</strong><br>One file is used for batch input. It contains the data. The Natural
                       commands are specified with the profile parameter
                       <a href="../parms/stack.htm"><code>STACK</code></a>:
            </p><pre class="command-input">natural BATCHMODE CMOBJIN=data.txt STACK="(LOGON SYSEXBAT; RECCONT;FIN)"</pre>  
                  </li> 
              
      </ul> 
          
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-detect"></a></div> 
          
      <h2> 
              <a name="x152"></a>Batch Mode Detection
      </h2> 
           
           
      <p>The system variable <a href="../vari/natenv.htm#DEVICE"><code>*DEVICE</code></a>
               indicates whether Natural is running in batch mode or interactive mode.
      </p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%">
         <colgroup>
            <col width="15%">
            <col width="82%">
         </colgroup> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th>Mode</th> 
                        
               <th>Description</th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td>Batch mode</td> 
                        
               <td><code>*DEVICE</code> contains
                  the value "BATCH". This value is set by the
                  parameter <a href="../parms/batchmode.htm"><code>BATCHMODE</code></a>.
               </td>
                        
                       
            </tr> 
                    
            <tr> 
                        
               <td>Interactive mode</td> 
                        
               <td><code>*DEVICE</code> contains a
                  value other than "BATCH". In most cases, it contains
                  the value "VIDEO".
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>Example:</p> 
           <pre class="verbatim">IF *DEVICE = "BATCH" THEN
   WRITE 'This is the background task'
ELSE
   WRITE 'This is the interactive session'
END-IF</pre> 
          <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-restrictions"></a></div> 
          
      <h2> 
              <a name="x153"></a>Batch Mode Restrictions
      </h2> 
           
           
      <p>When Natural is running in batch mode, some features are not available
               or are disabled: 
      </p> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">Interactive input or output is not possible.</p> 
                  
         </li> 
                
                
               
         <li> 
                   
            <p class="initem">Only data for an <a href="../sm/input.htm"><code>INPUT</code></a> statement can be processed.
                       
            </p> 
                  
         </li> 
                
               
         <li> 
                   
            <p class="initem">The terminal database <code>SAGtermcap</code> is not supported.
                       Therefore, the terminal capability TCS which is used for a different character
                       set is not supported. To use a different character set, use environment
                       variable <code>NATTCHARSET</code> instead. 
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">No colors and video attributes are written to the batch output file
                       defined by <code>CMPRINT</code>.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Filler characters are not displayed within an <code>INPUT</code>
                       statement.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Certain Natural system commands are not executable in batch mode, and
                       are ignored. In the <cite>System Commands</cite> documentation, a
                       corresponding note is provided for each system command to which this
                       restriction applies.
            </p> 
                  
         </li> 
              
      </ul> 
          
      <div class="noprint">
         <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="ops-batch-simulation"></a></div> 
          
      <h2> 
              <a name="x156"></a>Batch Mode Simulation
      </h2> 
           
           
      <p>In addition to the batch mode as described above, you can also simulate
               batch mode. However, it is recommended to use batch mode instead of batch mode
               simulation. Batch mode has the following advantages over batch mode simulation:
               
      </p> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">Easy data input with support of keyword delimiter mode.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Configurable and formatted output processing.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Extended error handling.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Faster startup and shutdown.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Faster program execution.</p> 
                  
         </li> 
              
      </ul> 
           
      <p>If the input channel is redirected to a file, Natural does not read the
               input commands and data from the keyboard but from this file. You have to
               specify the data in exactly the same way as you would do on the terminal. For
               example, for two input fields you have to fill up the first field with trailing
               blanks to position to the second field. No keyword delimiter mode is supported.
               To use keyword delimiter mode, use batch mode instead of batch mode
               simulation.
      </p> 
           
      <p> If the output channel is redirected to a file, Natural writes any
               output that would appear on the screen to this file. Control sequences are also
               written to the file, which makes the file unreadable. To get a formatted
               output, use batch mode instead of batch mode simulation. 
      </p> 
           
      <p>Use the dynamic parameter <a href="../parms/batch.htm"><code>BATCH</code></a> when starting
               Natural, to set the system variable <a href="../vari/natenv.htm#DEVICE"><code>*DEVICE</code></a>
               to the value "BATCH". This value can be checked
               within a Natural program. 
      </p> 
           
      <h4 class="floating-title">Example: Redirecting the Input Channel</h4> <pre class="command-input">natural BATCH &lt; <var>input-file-name</var></pre>  
           <p>Natural then receives all input operations from this input file (an
               example of this input file is provided below). 
      </p> 
           
      <h4 class="floating-title">Example: Redirecting the Input and Output
               Channel
      </h4> <pre class="command-input">natural BATCH &lt; <var>input-file-name</var> &gt; <var>output-file-name</var></pre>  
           <p>If you want to keep Natural reports only and hide all other output
               (write output to the null device), set the profile parameter
               <a href="../parms/mainpr.htm"><code>MAINPR</code></a> to
               a valid printer number and assign an executable file to the corresponding
               logical printer (device) in the parameter file, then specify: 
      </p> <pre class="command-input">natural BATCH &lt; <var>input-file-name</var> &gt; /dev/null</pre>  
           <p>Any Natural reports are written to the executable file, whereas any
               screen output is suppressed. An input file must be specified even if Natural
               does not expect any input at all. In this case, also the null device may be
               used. 
      </p> 
           
      <h4 class="floating-title">Sample Input File</h4> 
           <pre class="verbatim">dlist program *^M
fin^M</pre> 
            
           <p>The input file for batch mode simulation must contain the same
               keystrokes that you would make in an interactive session. 
      </p> 
           
      <p>The following keystrokes are used in the above sample input file:</p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%">
         <colgroup>
            <col width="18%">
            <col width="79%">
         </colgroup> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td>d</td> 
                        
               <td>Opens the <span class="selectable_label">Direct Command</span>
                            window.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>list program *</td> 
                        
               <td>Executes the Natural system command which is
                  used to list all programs.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>^M</td> 
                        
               <td> Stands for the key combination
                  <span class="key">CTRL+M</span> (carriage return). Simulates the <span class="key">ENTER</span>
                            key.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>fin</td> 
                        
               <td>Executes the Natural system command which is
                  used to terminate the Natural session.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>^M</td> 
                        
               <td>Stands for the key combination <span class="key">CTRL+M</span>
                      (carriage return). Simulates the <span class="key">ENTER</span> key.
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
          
      <div class="noprint">
         <div class="nospy">
            <p><a href="ops-batchmode.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../ops/ops-batchmode.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/ops/ops-batchmode.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-natbpmon.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="ops-char.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>