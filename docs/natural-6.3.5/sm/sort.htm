
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script language="JavaScript" src="../general/selbox.js"></script><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>SORT</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="sort" id="16865"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/sort.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/sort.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="skip.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="stack.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Statements&nbsp;&nbsp;&#8212;</span></div>
      </div> 
        
      <div class="nospytext">
         <h1> SORT 
               <a name="x162"></a></h1>
      </div> 
         
         
      <div><a name="Structured_Mode_Syntax_sort"></a></div>
      <h4 class="floating-title"> Structured Mode
             Syntax
      </h4> 
          
          
      <table border="0" class="syntax" cellpadding="3"> 
               
              
         <tbody align="left" valign="top"> 
                  
            <tr> 
                      
               <td align="left"> <a href="sort.htm#Processing_Loops">
                      <code class="keyword">END-ALL</code> </a> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left">[<code class="keyword">AND</code>]
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td rowspan="2" align="left"> <a href="sort.htm#Function_sort">
                      <code class="keyword">SORT</code> </a> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbo2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td align="left"> <code class="keyword">THEM</code> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbc2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td rowspan="2">[<code class="keyword">BY</code>] 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbo2.gif" alt="" width="6" height="38"></p> 
               </td> 
                      
               <td rowspan="2"> <a href="sort.htm#operand1_sort">
                      <var>operand1</var> </a> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbo2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td align="left"> <a href="sort.htm#ASCENDING">
                      <code class="keyword"><u>ASC</u>ENDING</code> </a>
                          
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbc2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td rowspan="2">
                  <img src="../graphics/cbc2.gif" alt="" width="6" height="38">
                          <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                          <var> 10 </var> 
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left"> <code class="keyword">RECORDS</code> 
               </td> 
                      
               <td align="left"> <a href="sort.htm#DESCENDING">
                      <code class="keyword"><u>DESC</u>ENDING</code> </a>
                          
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <a href="sort.htm#USING_clause">
                      <var>USING-clause</var> </a> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> [<a href="sort.htm#GIVE_clause"><var>GIVE-clause</var></a>]
                          
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <a href="synsym.htm#note_statement">
                      <var>statement</var> </a>
                          <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                          
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left"> <a href="sort.htm#end_sort"> <code class="keyword">END-SORT</code> </a> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                 
         </tbody> 
             
      </table> 
          
         
      <p><sup>*</sup> If a
             <a href="../pg/pg_defi_dv.htm#ref_w_statement_labels">statement
                label</a> is specified, it must be placed <em>before</em> the keyword
             <code>SORT</code>, but <em>after</em> <code>END-ALL</code> (and
             <code>AND</code>).
      </p> 
         
      <div><a name="Reporting_Mode_Syntax_sort"></a></div>
      <h4 class="floating-title"> Reporting Mode
             Syntax
      </h4> 
          
          
      <table border="0" class="syntax" cellpadding="3"> 
               
              
         <tbody align="left" valign="top"> 
                  
            <tr> 
                      
               <td rowspan="2" align="right"> <a href="sort.htm#Function_sort">
                      <code class="keyword">SORT</code> </a> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbo2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td align="left"> <code class="keyword">THEM</code> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbc2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td rowspan="2">[<code class="keyword">BY</code>] 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbo2.gif" alt="" width="6" height="38"></p> 
               </td> 
                      
               <td rowspan="2"> <a href="sort.htm#operand1_sort">
                      <var>operand1</var> </a> 
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbo2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td align="left"> <a href="sort.htm#ASCENDING">
                      <code class="keyword"> <u>ASC</u>ENDING</code> </a>
                          
               </td> 
                      
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/sbc2.gif" alt="" width="5" height="40"></p> 
               </td> 
                      
               <td rowspan="2">
                  <img src="../graphics/cbc2.gif" alt="" width="6" height="38">
                          <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                          <var> 10 </var> 
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td align="left"> <code class="keyword">RECORDS</code> 
               </td> 
                      
               <td align="left"> <a href="sort.htm#DESCENDING">
                      <code class="keyword"> <u>DESC</u>ENDING</code> </a>
                          
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <a href="sort.htm#USING_clause">
                     [<var>USING-clause</var>]</a> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <a href="sort.htm#GIVE_clause">[<var>GIVE-clause</var>]</a>
                          
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <a href="synsym.htm#note_statement">
                      <var>statement</var> </a>
                          <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                          
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td colspan="2">[<a href="loop.htm#loop"><code class="keyword">LOOP</code></a>]
               </td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                 
         </tbody> 
             
      </table> 
          
         
      <p>This document covers the following topics:</p>
         
      <ul>
         <li>
            <p class="initem"><a href="sort.htm#Function_sort">Function</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#Restrictions_sort">Restrictions</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#syntax_descr_sort">Syntax Description</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#SORT_Stat_Proc">Three-Phase SORT Processing</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#Example_sort">Example</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#Ext_sort">Using External Sort Programs</a></p>
         </li>
      </ul> 
         
      <p>For an explanation of the symbols used in the syntax diagram, see
             <a href="synsym.htm#Syntax_Symbols">Syntax
            Symbols</a>.
      </p> 
         
      <p>Related Statement: <a href="find.htm#SORTED_BY_clause">FIND
            with SORTED BY option</a></p> 
         
      <p>Belongs to Function Group: <a href="stmt.htm#Loop_Execution">Loop Execution</a></p> 
        
      <hr> 
        
      <div><a name="Function_sort"></a></div> 
         
      <h2> Function </h2> 
          
          
      <p>The <code>SORT</code> statement is used to perform a sort operation,
              sorting the records from all processing loops that are active when the
              <code>SORT</code> statement is executed.
      </p> 
          
      <p>For the sort operation, Natural's internal sort program
              is used. It is also possible to use another, external sort program.
      </p> 
           
          
        
        
      <div class="noprint">
         <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Restrictions_sort"></a></div> 
         
      <h2> Restrictions </h2> 
          
          
      <ul> 
              
         <li> 
                  
            <p class="initem">The <code>SORT</code> statement must be contained in the same object
                      as the processing loops whose records it sorts.
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">Nested <code>SORT</code> statements are not allowed.
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">The total length of a record to be sorted must not exceed 10240
                      bytes.
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">The number of sort criteria must not exceed 10.</p> 
                 
         </li> 
             
      </ul> 
          
        
        
      <div class="noprint">
         <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="syntax_descr_sort"></a></div> 
         
      <h2> Syntax Description </h2> 
          
          
      <p>Operand Definition Table:</p> 
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
                
                
                
                
                
                
                
                 
               
         <thead align="left" valign="top"> 
                   
            <tr> 
                       
               <th>Operand</th> 
                       
               <th colspan="5" align="center">
                  <a href="synsym.htm#statem_poss_struct">Possible Structure</a> 
               </th> 
                       
               <th colspan="12" align="center">
                  <a href="synsym.htm#statem_poss_form">Possible Formats</a> 
               </th> 
                       
               <th align="center"> <a href="synsym.htm#statem_ref_perm">Referencing
                     Permitted</a> 
               </th> 
                       
               <th align="center"> <a href="synsym.htm#statem_dyn_def">Dynamic
                     Definition</a> 
               </th> 
                      
            </tr> 
                  
         </thead> 
               
         <tbody align="left" valign="top"> 
                   
            <tr> 
                       
               <td> <var>operand1</var> 
               </td> 
                       
               <td>&nbsp;</td> 
                       
               <td>S</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>A</td> 
                       
               <td>N</td> 
                       
               <td>P</td> 
                       
               <td>I</td> 
                       
               <td>F</td> 
                       
               <td>B</td> 
                       
               <td>D</td> 
                       
               <td>T</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td align="center">no</td> 
                       
               <td align="center">no</td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
      <p>Syntax Element Description:</p> 
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
               
         <tbody align="left" valign="top"> 
                   
            <tr> 
                       
               <th> <a name="Processing_Loops"></a>END-ALL
                   
               </th> 
                       
               <td> 
                  
                  <p>In structured mode, the <code>SORT</code> statement must be
                               preceded by <code>END-ALL</code>, which serves to close all active processing
                               loops. The <code>SORT</code> statement itself initiates a new processing loop,
                               which must be closed with <code>END-SORT</code>.
                  </p> 
                           
                  <p class="note"><strong>Note:</strong><br>For reporting mode: The <code>SORT</code> statement closes all
                               active processing loops and initiates a new processing loop.
                  </p> 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th> <a name="operand1_sort"></a>
                   <var>operand1</var> 
               </th> 
                       
               <td> 
                  
                  <div><strong class="floating-title"> Sort Criteria: </strong></div> 
                           
                  <p> <var>operand1</var> represents the
                     fields/variables to be used as the sort criteria. 1 to 10 database fields
                     (descriptors and non-descriptors) and/or user-defined variables may be
                     specified. A multiple-value field or a field contained within a periodic group
                     may be used. A group or an array is not permitted.
                  </p> 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th nowrap> <a name="ASCENDING"></a> ASCENDING
                   
               </th> 
                       
               <td rowspan="2"> 
                  
                  <p>The default sort sequence is ascending. If you wish the values to
                     be sorted in descending sequence, specify <code>DESCENDING</code>.
                  </p> 
                           
                  <p><code>ASCENDING</code>/<code>DESCENDING</code> may be specified for
                               each sort field.
                  </p> 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th nowrap> <a name="DESCENDING"></a>DESCENDING 
               </th> 
                      
            </tr> 
                   
            <tr> 
                       
               <th>USING</th> 
                       
               <td>See <a href="sort.htm#USING_clause">USING
                     Clause</a> below.
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th>GIVE</th> 
                       
               <td>See <a href="sort.htm#GIVE_clause">GIVE
                     Clause</a> below.
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th> <a name="end_sort"></a>END-SORT 
               </th> 
                       
               <td>The Natural reserved word <code>END-SORT</code> must be used to
                           end the <code>SORT</code> statement.
               </td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
         
      <div><a name="USING_clause"></a></div> 
          
      <h3> USING Clause </h3> 
           
           
      <p>The <code>USING</code> clause indicates the fields which are to be
               written to intermediate sort storage. It is required in structured mode and
               optional in reporting mode. However, it is strongly recommended to also use it
               in reporting mode so as to reduce memory requirements.
      </p> 
            
            
      <table border="0" class="syntax" cellpadding="3"> 
                  
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbo2.gif" alt="" width="6" height="38"></p> 
               </td> 
                        
               <td align="left"> <code class="keyword">USING</code>
                        <a href="sort.htm#operand2_sort"> {<var>operand2</var>}...
                               </a> 
               </td> 
                        
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbc2.gif" alt="" width="6" height="38"></p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"> <a href="sort.htm#USING_KEYS">
                      <code class="keyword">USING <u>KEY</u>S</code></a>
                            
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>Operand Definition Table:</p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
                 
                 
                 
                 
                 
                 
                 
                  
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th>Operand</th> 
                        
               <th colspan="5" align="center">
                  <a href="synsym.htm#statem_poss_struct">Possible Structure</a> 
               </th> 
                        
               <th colspan="12" align="center">
                  <a href="synsym.htm#statem_poss_form">Possible Formats</a> 
               </th> 
                        
               <th align="center"> <a href="synsym.htm#statem_ref_perm">Referencing Permitted</a> 
               </th> 
                        
               <th align="center"> <a href="synsym.htm#statem_dyn_def">Dynamic
                     Definition</a> 
               </th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td> <var>operand2</var> 
               </td> 
                        
               <td>&nbsp;</td> 
                        
               <td>S</td> 
                        
               <td>A</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>A</td> 
                        
               <td>N</td> 
                        
               <td>P</td> 
                        
               <td>I</td> 
                        
               <td>F</td> 
                        
               <td>B</td> 
                        
               <td>D</td> 
                        
               <td>T</td> 
                        
               <td>L</td> 
                        
               <td>C</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="center">no</td> 
                        
               <td align="center">no</td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>Syntax Element Description:</p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <th nowrap>USING <a name="operand2_sort"></a><var>operand2</var> 
               </th> 
                        
               <td>You can specify additional fields that are to be written to
                  intermediate sort storage - in addition to the sort key fields (as specified
                  with <var>operand1</var>).
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <th> <a name="USING_KEYS"></a>USING KEYS
                   
               </th> 
                        
               <td> Only the sort key fields, as specified with
                  <var>operand1</var>, will be written to intermediate sort
                            storage. 
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p> <em>In Reporting Mode:</em> If you omit the <code>USING</code> clause,
               all database fields of processing loops initiated before the <code>SORT</code>
               statement, as well as all user-defined variables defined before the
               <code>SORT</code> statement, will be written to intermediate sort storage.
      </p> 
           
      <p>If, after sort execution, a reference is made to a field which was not
               written to sort intermediate storage, the value for the field will be the last
               value of the field before the sort.
      </p> 
           
          
         
      <div><a name="GIVE_clause"></a></div> 
          
      <h3> GIVE Clause </h3> 
           
           
      <p><a name="MAX_sort"></a>The <code>GIVE</code> clause is used to specify Natural
               system functions (<code>MAX</code>, <code>MIN</code>, etc.) that are to be
               evaluated in the first phase of the <code>SORT</code> statement. These system
               functions may be referenced in the third phase (see
               <a href="sort.htm#SORT_Stat_Proc">SORT Statement
            Processing</a>). A reference to a system function after the
               <code>SORT</code> statement must be preceded by an asterisk, for example,
               <code>*AVER(SALARY)</code>.
      </p> 
            
            
      <table border="0" class="syntax" cellpadding="3"> 
                 
                 
                  
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td rowspan="10" align="center"> 
                  
                  <p><img src="../graphics/cbo12.gif" alt="" width="10" height="250"></p> 
               </td> 
                        
               <td rowspan="10"> 
                  
                  <p><img src="../graphics/cbo12.gif" alt="" width="10" height="250"></p> 
               </td> 
                        
               <td align="left"> <a href="sort.htm#MAX_sort">
                      <code class="keyword">MAX</code> </a> 
               </td> 
                        
               <td rowspan="10">
                  <img src="../graphics/cbc12.gif" alt="" width="10" height="250">
                            <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                            
               </td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td rowspan="10">
                  <img src="../graphics/cbc12.gif" alt="" width="10" height="250">
                            <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                            
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="scalar.htm#MIN"> <code class="keyword">MIN</code> </a> 
               </td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#NMIN">
                      <code class="keyword">NMIN</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#COUNT">
                      <code class="keyword">COUNT</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td rowspan="2"> <code class="keyword">GIVE</code> 
               </td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#NCOUNT">
                      <code class="keyword">NCOUNT</code></a></td> 
                        
               <td rowspan="2">[<code class="keyword">OF</code>] 
               </td> 
                        
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbo2.gif" alt="" width="6" height="38"></p> 
               </td> 
                        
               <td align="left"> (<a href="sort.htm#sort_oper3"><var>operand3</var>
                               </a><img src="../graphics/dot3.gif" alt="" width="12" height="4">) 
               </td> 
                        
               <td rowspan="2"> 
                  
                  <p><img src="../graphics/cbc2.gif" alt="" width="6" height="38"></p> 
               </td> 
                        
               <td rowspan="2">[<a href="sort.htm#NL_nn">(<code class="keyword">NL=</code><var>nn</var></a>)] 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"> <a href="../func/func_sf.htm#OLD">
                      <code class="keyword">OLD</code></a></td> 
                        
               <td align="left"> <a href="sort.htm#sort_oper3">
                      <var>operand3</var></a>
                            <img src="../graphics/dot3.gif" alt="" width="12" height="4">
                            
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#AVER">
                      <code class="keyword">AVER</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#NAVER">
                      <code class="keyword">NAVER</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#SUM">
                      <code class="keyword">SUM</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left"> <a href="../func/func_sf.htm#TOTAL">
                      <code class="keyword">TOTAL</code></a></td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="left">&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>Operand Definition Table:</p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
                 
                 
                 
                 
                 
                 
                 
                  
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th>Operand</th> 
                        
               <th colspan="5" align="center">
                  <a href="synsym.htm#statem_poss_struct">Possible Structure</a> 
               </th> 
                        
               <th colspan="12" align="center">
                  <a href="synsym.htm#statem_poss_form">Possible Formats</a> 
               </th> 
                        
               <th align="center"> <a href="synsym.htm#statem_ref_perm">Referencing Permitted</a> 
               </th> 
                        
               <th align="center"> <a href="synsym.htm#statem_dyn_def">Dynamic
                     Definition</a> 
               </th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td> <var>operand3</var> 
               </td> 
                        
               <td>&nbsp;</td> 
                        
               <td>S</td> 
                        
               <td>A</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>*</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td>&nbsp;</td> 
                        
               <td align="center">yes</td> 
                        
               <td align="center">no</td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p><sup>*</sup> depends on function
      </p> 
           
      <p>Syntax Element Description:</p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <th> <a href="sort.htm#MAX_sort">MAX</a> |
                      <a href="scalar.htm#MIN">MIN</a> |
                            <a href="../func/func_sf.htm#NMIN">NMIN</a> |
                            <a href="../func/func_sf.htm#COUNT">COUNT</a> |
                            <a href="../func/func_sf.htm#NCOUNT">NCOUNT</a> |
                            <a href="../func/func_sf.htm#OLD">OLD</a> |
                            <a href="../func/func_sf.htm#AVER">AVER</a> |
                            <a href="../func/func_sf.htm#NAVER">NAVER</a> |
                            <a href="../func/func_sf.htm#SUM">SUM</a> |
                            <a href="../func/func_sf.htm#TOTAL">TOTAL</a> 
               </th> 
                        
               <td>For details on the individual system functions, see the
                  <a href="../func/func-over.htm">System
                               Functions</a> documentation.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <th> <a name="sort_oper3"></a><var>operand3</var> 
               </th> 
                        
               <td> <var>operand3</var> is the field name.
                           
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <th> <a name="NL_nn"></a>(NL=<var>nn</var>) 
               </th> 
                        
               <td> 
                  
                  <p>This option applies to <a href="../func/func_sf.htm#AVER"><code>AVER</code></a>,
                                <a href="../func/func_sf.htm#NAVER"><code>NAVER</code></a>,
                                <a href="../func/func_sf.htm#SUM"><code>SUM</code></a> and
                                <a href="../func/func_sf.htm#TOTAL"><code>TOTAL</code></a> only
                                and will be ignored for any other system function.
                  </p> 
                            
                  <p>This option may be used to prevent an arithmetic overflow during
                                the evaluation of system functions; it is described under
                                <a href="../func/func_sf.htm#AVERNAVERSUMTOTAL_AO">Arithmetic
                                   Overflows in AVER, NAVER, SUM or TOTAL</a> in the
                                <cite>System Functions</cite> documentation.
                  </p> 
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
          
        
        
      <div class="noprint">
         <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="SORT_Stat_Proc"></a></div> 
         
      <h2> Three-Phase SORT Processing </h2> 
          
          
      <p>A program containing a <code>SORT</code> statement is executed in three
              phases.
      </p> 
          
      <h4 class="floating-title"> 1st Phase - Selecting the Records to be Sorted
              
      </h4> 
          
      <p>The statements before the <code>SORT</code> statement are executed. Data
              as described in the <a href="sort.htm#USING_clause"><code>USING</code></a> clause will be written to
              intermediate sort storage.
      </p> 
          
      <p>In reporting mode, any variables to be used as accumulators following
              the sort must not be defined before the <code>SORT</code> statement. In
              structured mode, they must not be included in the
              <a href="sort.htm#USING_clause"><code>USING</code></a> clause. Fields
              written to intermediate sort storage cannot be used as accumulators because
              they are read back with each individual record during the 3rd processing phase.
              Consequently, the accumulation function would not produce the desired result
              because with each record the field would be overwritten with the value for that
              individual record.
      </p> 
          
      <p>The number of records written to intermediate storage is determined by
              the number of processing loops and the number of records processed per loop.
              One record on the internal intermediate storage is created each time the
              <code>SORT</code> statement is encountered in a processing loop. In the case of
              nested loops, a record is only written to intermediate storage if the inner
              loop is executed. If in the example below a record is to be written to
              intermediate storage even if no records are found for the inner
              (<code>FIND</code>) loop, the <a href="find.htm#find"><code>FIND</code></a> statement must contain an
              <a href="find.htm#IF_NO_RECORDS_FOUND-clause"><code>IF NO RECORDS
               FOUND</code></a> clause.
      </p> 
          <pre class="verbatim">READ ...
  ...
  FIND ...
...
END-ALL
SORT ...
  DISPLAY ...   
END-SORT
...</pre> 
          <h4 class="floating-title"> 2nd Phase - Sorting the Records</h4> 
          
      <p>The records are sorted.</p> 
          
      <h4 class="floating-title"> 3rd Phase -Processing the Sorted Records </h4>
          
          
      <p>The statements after the <code>SORT</code> statement are executed for
              all records on the intermediate storage in the specified sorting sequence.
              Database fields to be referenced after a <code>SORT</code> statement must be
              correctly referenced using the appropriate statement label or reference
              number.
      </p> 
          
        
        
      <div class="noprint">
         <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Example_sort"></a></div> 
         
      <h2> Example </h2>
      <ul>
         <li>
            <p class="initem"><a href="sort.htm#Example_1_sort">Example 1 - SORT</a></p>
         </li>
         <li>
            <p class="initem"><a href="sort.htm#Example_2_sort">Example 2 - SORT</a></p>
         </li>
      </ul>
      <div><a name="Example_1_sort"></a></div> 
          
      <h3> Example 1 - SORT</h3> 
           
           <pre class="verbatim">** Example 'SRTEX1S': SORT (structured mode)                            
************************************************************************
DEFINE DATA LOCAL                                                       
1 EMPL-VIEW VIEW OF EMPLOYEES                                           
  2 CITY                                                                
  2 SALARY      (1:2)                                                   
  2 PERSONNEL-ID                                                        
  2 CURR-CODE   (1:2)                                                   
*                                                                       
1 #AVG          (P11)                                                   
1 #TOTAL-TOTAL  (P11)                                                   
1 #TOTAL-SALARY (P11)                                                   
1 #AVER-PERCENT (N3.2)                                                  
END-DEFINE                                                              
*                                                                       
LIMIT 3                                                                 
FIND EMPL-VIEW WITH CITY = 'BOSTON'                                     
  COMPUTE #TOTAL-SALARY = SALARY (1) + SALARY (2)                       
  ACCEPT IF #TOTAL-SALARY GT 0                                          
  /*                                                           
END-ALL                                                        
AND                                                            
<strong>SORT BY PERSONNEL-ID USING #TOTAL-SALARY SALARY(*) CURR-CODE(1)
     GIVE AVER(#TOTAL-SALARY)</strong>                             
  /*                                                           
  AT START OF DATA                                             
    WRITE NOTITLE '*' (40)                                     
         'AVG CUMULATIVE SALARY:' *AVER (#TOTAL-SALARY) /      
    MOVE *AVER (#TOTAL-SALARY) TO #AVG                         
  END-START                                                    
  COMPUTE ROUNDED #AVER-PERCENT = #TOTAL-SALARY / #AVG * 100   
  ADD #TOTAL-SALARY TO #TOTAL-TOTAL                            
  /*                                                           
  DISPLAY NOTITLE PERSONNEL-ID SALARY (1) SALARY (2)           
          #TOTAL-SALARY CURR-CODE (1)                          
          'PERCENT/OF/AVER' #AVER-PERCENT                      
  AT END OF DATA                                               
    WRITE / '*' (40) 'TOTAL SALARIES PAID: ' #TOTAL-TOTAL      
  END-ENDDATA
<strong>END-SORT</strong>  
*            
END         </pre> 
           <h4 class="floating-title">Output of Program SRTEX1S:</h4> <pre class="system-output">PERSONNEL   ANNUAL     ANNUAL   #TOTAL-SALARY CURRENCY PERCENT
     ID       SALARY     SALARY                   CODE     OF
                                                          AVER
  --------- ---------- ---------- ------------- -------- -------
  
  **************************************** AVG CUMULATIVE SALARY:        41900
  
  20007000       16000      15200        31200  USD        74.00
  20019200       18000      17100        35100  USD        83.00
  20020000       30500      28900        59400  USD       141.00
  
  **************************************** TOTAL SALARIES PAID:        125700</pre> 
           <p>The previous example is executed as follows:</p> 
           
      <h4 class="floating-title"> First Phase: </h4> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">Records with <code>CITY=BOSTON</code> are selected from the
                       EMPLOYEES file.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">The first 2 occurrences of <code>SALARY</code> are accumulated in the
                       field <code>#TOTAL-SALARY</code>.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Only records with <code>#TOTAL-SALARY</code> greater than 0 are
                       accepted.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">The records are written to the sort intermediate storage. The
                       database arrays <code>SALARY</code> (first 2 occurrences) and
                       <code>CURR-CODE</code> (first occurrence), the database field
                       <code>PERSONNEL-ID</code>, and the user-defined variable
                       <code>#TOTAL-SALARY</code> are written to the intermediate storage.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">The average of <code>#TOTAL-SALARY</code> is evaluated.
            </p> 
                  
         </li> 
              
      </ul> 
           
      <h4 class="floating-title"> Second Phase: </h4> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">The records are sorted.</p> 
                  
         </li> 
              
      </ul> 
           
      <h4 class="floating-title"> Third Phase: </h4> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">The sorted intermediate storage is read.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">At the at-start-of-data condition, the average of
                       <code>#TOTAL-SALARY</code> is displayed.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem"><code>#TOTAL-SALARY</code> is added to <code>#TOTAL-TOTAL</code> and
                       the fields <code>PERSONNEL-ID</code>, <code>SALARY(1)</code>,
                       <code>SALARY(2)</code>, <code>#AVER-PERCENT</code> and
                       <code>#TOTAL-SALARY</code> are displayed.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">At the end-of-data condition, the variable <code>#TOTAL-TOTAL</code>
                       is written.
            </p> 
                  
         </li> 
              
      </ul> 
           
      <p>Equivalent reporting-mode example: <a href="sm_exas.htm#SRTEX1R">SRTEX1R</a>.
      </p> 
          
      <div><a name="Example_2_sort"></a></div> 
          
      <h3> Example 2 - SORT</h3> 
           
           <pre class="verbatim">** Example 'SRTEX2': SORT                                               
************************************************************************
DEFINE DATA LOCAL                                                       
1 VEHIC-VIEW VIEW OF VEHICLES                                           
  2 MAKE                                                                
  2 YEAR                                                                
END-DEFINE                                                              
*                                                                       
LIMIT 10                                                                
*                                                                       
READ VEHIC-VIEW                                                         
END-ALL                                                                 
<strong>SORT BY MAKE YEAR USING KEY</strong>                                       
  DISPLAY NOTITLE (AL=15) MAKE (IS=ON) YEAR                             
  AT BREAK OF MAKE                                                      
    WRITE '-' (20)                                                      
  END-BREAK                                                             
<strong>END-SORT</strong>                                                           
END  </pre> 
           <h4 class="floating-title">Output of Program SRTEX2S:</h4> <pre class="system-output">     MAKE       YEAR 
--------------- -----
                     
FIAT             1980
                 1982
                 1984
-------------------- 
PEUGEOT          1980
                 1982
                 1985
-------------------- 
RENAULT          1980
                 1980
                 1982
                 1982
--------------------</pre> 
           
        
        <div class="noprint">
         <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Ext_sort"></a></div> 
         
      <h2> Using External Sort Programs </h2> 
         
          
          
      <p>In Natural, sort operations are by default processed by Natural's
              internal sort program, as described above. However, an external sort program
              can be used. This external sort program then processes the sort operations
              instead of Natural's internal sort program.
      </p> 
           
           
           
      <p>As external sort program SyncSort for UNIX is supported. Whether an
               external sort program is used or not, can be determined while you install
               Natural.
      </p> 
           
      <p>For further information, see the
               <a href="../install/inst-prod.htm#inst-nat-steps-relinkparmnat">Installation</a>
               documentation for Natural for UNIX.
      </p> 
           
      <p>The records that are to be sorted will be temporarily stored in the
               directory specified under <code>TMP_PATH</code> in the configuration file
               <cite>Natural.INI</cite>.
      </p> 
           
           
          
        
       
      <div class="noprint">
         <div class="nospy">
            <p><a href="sort.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/sort.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/sort.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="skip.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="stack.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>