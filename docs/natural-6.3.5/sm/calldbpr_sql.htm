
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script language="JavaScript" src="../general/selbox.js"></script><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>CALLDBPROC - SQL</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="calldbpr_sql" id="16919"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/calldbpr_sql.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/calldbpr_sql.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sql-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="flexib.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="commit_sql.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Statements&nbsp;&nbsp;&#8212;</span></div>
      </div> 
        
      <div class="nospytext">
         <h1> CALLDBPROC - SQL 
               <a name="x187"></a></h1>
      </div> 
         
          
          
      <table border="0" class="syntax" cellpadding="3"> 
               
               
               
               
               
                
              
         <tbody align="left" valign="top"> 
                  
            <tr> 
                      
               <td colspan="13">
                  <a href="calldbpr_sql.htm#Function_calldbpr_sql"> <code class="keyword">CALLDBPROC</code></a><a href="calldbpr_sql.htm#dbproc">
                             <var>dbproc</var></a><a href="calldbpr_sql.htm#ddm-name_calldbpr_sql"> <var>ddm-name</var>
                             </a> 
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="2">&nbsp;</td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/sbo3.gif" alt="" width="5" height="61"></p> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/sbo3.gif" alt="" width="5" height="61"></p> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/cbo3.gif" alt="" width="6" height="59"></p> 
               </td> 
                      
               <td align="center"> <a href="calldbpr_sql.htm#ADM_calldbpr_sql">
                      <code class="keyword">M</code> </a> 
               </td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/cbc3.gif" alt="" width="6" height="59"></p> 
               </td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/sbc3.gif" alt="" width="5" height="61"></p> 
               </td> 
                      
               <td rowspan="3"> 
                  
                  <p><img src="../graphics/sbc3.gif" alt="" width="5" height="61"></p> 
               </td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="2"> [<a href="calldbpr_sql.htm#parameter_calldbpr_sql"><code class="keyword">USING</code></a>]
                         
               </td> 
                      
               <td> <a href="calldbpr_sql.htm#parameter_calldbpr_sql">
                      <var>parameter</var> </a> 
               </td> 
                      
               <td align="right"> <a href="calldbpr_sql.htm#AD_calldbpr_sql">
                      <code class="keyword">AD=</code> </a> 
               </td> 
                      
               <td align="center"> <a href="calldbpr_sql.htm#ADO_calldbpr_sql">
                      <code class="keyword">O</code> </a> 
               </td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="2">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td align="center"> <a href="calldbpr_sql.htm#ADA_calldbpr_sql">
                      <code class="keyword">A</code> </a> 
               </td> 
                      
               <td> 
                  
                  <p><img src="../graphics/dot3.gif" alt="" width="12" height="4"></p> 
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="12"> [<a href="calldbpr_sql.htm#result-set_calldbpr_sql"><code class="keyword">RESULT SETS</code>]
                             <var>result-set</var></a><img src="../graphics/dot3.gif" alt="" width="12" height="4"><a href="calldbpr_sql.htm#result-set_calldbpr_sql"></a>] 
               </td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="12"> [<a href="calldbpr_sql.htm#GIVING_sqlcode_calldbpr_sql"><code class="keyword">GIVING</code>
                             <var>sqlcode</var></a>]
               </td> 
                     
            </tr> 
                   
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td align="left"> <code class="keyword">NATURAL</code> 
               </td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                  
            <tr> 
                      
               <td>&nbsp;</td> 
                      
               <td colspan="3" align="left">[<a href="calldbpr_sql.htm#CALLMODE"><code class="keyword">CALLMODE</code></a>=<code class="keyword">NONE</code>]
               </td> 
                      
               <td align="left">&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                      
               <td>&nbsp;</td> 
                     
            </tr> 
                 
         </tbody> 
             
      </table> 
          
         
      <p>This document covers the following topics:</p>
         
      <ul>
         <li>
            <p class="initem"><a href="calldbpr_sql.htm#Function_calldbpr_sql">Function</a></p>
         </li>
         <li>
            <p class="initem"><a href="calldbpr_sql.htm#syntax_descr_calldbproc">Syntax Description</a></p>
         </li>
         <li>
            <p class="initem"><a href="calldbpr_sql.htm#Example_calldbpr_sql">Example</a></p>
         </li>
      </ul> 
         
      <p>For an explanation of the symbols used in the syntax diagram, see
             <a href="synsym.htm#Syntax_Symbols">Syntax
            Symbols</a>.
      </p>
         
      <p>Belongs to Function Group:
             <a href="stmt.htm#Database_Access_and_Update">Database Access and
            Update</a></p> 
          
        
      <hr> 
        
      <div><a name="Function_calldbpr_sql"></a></div> 
         
      <h2> Function</h2> 
          
          
      <p>The <code>CALLDBPROC</code> statement is used to invoke a stored
              procedure of the SQL database system to which Natural is connected.
      </p> 
          
      <p>The stored procedure can be either a Natural subprogram or a program
              written in another programming language.
      </p> 
          
      <p>In addition to the passing of parameters between the invoking object and
              the stored procedure, <code>CALLDBPROC</code> supports "result
              sets"; these make it possible to return a larger amount of data from the
              stored procedure to the invoking object than would be possible via
              parameters.
      </p> 
          
      <p>The result sets are "temporary result tables" which are
              created by the stored procedure and which can be read and processed by the
              invoking object via a <a href="readresu_sql.htm#readresu_sql"><code>READ RESULT
               SET</code></a> statement.
      </p> 
          
      <p class="note"><strong>Note:</strong><br> In general, the invoking of a stored procedure could be compared
              with the invoking of a Natural subprogram: when the <code>CALLDBPROC</code>
              statement is executed, control is passed to the stored procedure; after
              processing of the stored procedure, control is returned to the invoking object
              and processing continues with the statement following the
              <code>CALLDBPROC</code> statement.
      </p> 
          
        
        
        
      <div class="noprint">
         <p><a href="calldbpr_sql.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="syntax_descr_calldbproc"></a></div> 
         
      <h2> Syntax Description </h2> 
          
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
               
         <tbody align="left" valign="top"> 
                   
            <tr> 
                       
               <th> <a name="dbproc"></a>
                   <var>dbproc</var> 
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> Stored Procedure To Be Invoked:</strong></div> 
                           
                  <p>As <var>dbproc</var> you specify the name of the
                     stored procedure to be invoked. The name can be specified either as an
                     alphanumeric variable or as a constant (enclosed in apostrophes).
                  </p> 
                           
                  <p>The name must adhere to the rules for stored procedure names of the
                               target database system.
                  </p> 
                           
                  <p>If the stored procedure is a Natural subprogram, the actual
                               procedure name must not be longer than 8 characters.
                  </p> 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th> <a name="ddm-name_calldbpr_sql"></a>
                   <var>ddm-name</var> 
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> Name of a Natural Data Definition Module:
                                  </strong></div> 
                           
                  <p>The name of a DDM must be specified to provide the
                     "address" of the database which executes the stored procedure. For
                               more information see <a href="calldbpr_sql.htm#ddm-name_calldbpr_sql"><var>ddm-name</var></a>.
                  </p>
                           
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th>[USING] <a name="parameter_calldbpr_sql"></a><var>parameter</var>
                           
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> Parameters To Be Passed:</strong></div> 
                           
                  <p>As <var>parameter</var>, you can specify parameters
                     which are passed from the invoking object to the stored procedure. A
                               <var>parameter</var> can be
                  </p> 
                           
                  <ul> 
                               
                     <li> 
                                   
                        <p class="initem">a host-variable (optionally with <code>INDICATOR</code> and
                                       <code>LINDICATOR</code> clauses),
                        </p> 
                                  
                     </li> 
                               
                     <li> 
                                   
                        <p class="initem">a constant, or</p> 
                                  
                     </li> 
                               
                     <li> 
                                   
                        <p class="initem">the keyword NULL.</p> 
                                  
                     </li> 
                              
                  </ul> 
                           
                  <p>See further details on <a href="basic.htm#host-variable"><var>host-variable</var></a>.
                  </p>
                           
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th rowspan="5"><a name="AD_calldbpr_sql"></a>AD=
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title">Attribute Definition:</strong></div> If the
                           <var>parameter</var> is a
                           <var>host-variable</var>, you can mark it as follows: 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <td><a name="ADO_calldbpr_sql"></a>AD=O
               </td> 
                       
               <td> 
                  
                  <p>Non-modifiable, see session parameter
                               <a href="../parms/sp_ad.htm#sp_ad_ad_o"><code>AD=O</code></a>.
                  </p>
                           
                           
                  <p>(Corresponding procedure notation in DB2 for z/OS:
                               <code>IN</code>.)
                  </p>
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <td><a name="ADM_calldbpr_sql"></a>AD=M
               </td> 
                       
               <td> 
                  
                  <p>Modifiable, see session parameter
                               <a href="../parms/sp_ad.htm#sp_ad_ad_m"><code>AD=M</code></a>.
                  </p>
                           
                           
                  <p>(Corresponding procedure notation in DB2 for z/OS:
                               <code>INOUT</code>.)
                  </p>
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <td><a name="ADA_calldbpr_sql"></a>AD=A
               </td> 
                       
               <td> 
                  
                  <p>For input only, see session parameter
                               <a href="../parms/sp_ad.htm#sp_ad_ad_a"><code>AD=A</code></a>.
                  </p>
                           
                           
                  <p>(Corresponding procedure notation in DB2 for z/OS:
                               <code>OUT</code>.)
                  </p>
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <td colspan="2">If the
                  <var>parameter</var> is a constant, <code>AD</code>
                  cannot be explicitly specified. For constants <code>AD=O</code>
                           always applies. 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th> <a name="result-set_calldbpr_sql"></a>
                   <var>result-set</var> 
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> Field for Result-Set Locator Variable:
                                  </strong></div> 
                           
                  <p>As <var>result-set</var> you specify a field in
                               which a result-set locator is to be returned.
                  </p> 
                           
                  <p>A result set has to be a variable of format/length I4.</p> 
                           
                  <p>The value of a result set variable is merely a number which
                               identifies the result set and which can be referenced in a subsequent
                               <a href="readresu_sql.htm#readresu_sql"><code>READ RESULT SET</code></a>
                               statement.
                  </p> 
                           
                  <p>The sequence of the <var>result-set</var> values
                               correspond to the sequence of the result sets returned by the stored
                               procedure.
                  </p> 
                           
                  <p>The contents of the result sets can be processed by a subsequent
                               <a href="readresu_sql.htm#readresu_sql"><code>READ RESULT SET</code></a>
                               statement.
                  </p> 
                           
                  <p>If no result set is returned, the corresponding result-set variable
                               will contain <code>0</code>.
                  </p> 
                            
                            
                           
                  <p>Only one result set can be specified.</p> 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th> <a name="GIVING_sqlcode_calldbpr_sql"></a>GIVING
                   <var>sqlcode</var> 
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> GIVING <var>sqlcode</var>
                                  Option:</strong></div> 
                           
                  <p>This option may be used to obtain the SQL code of the SQL
                               <code>CALL</code> statement invoking the stored procedure.
                  </p> 
                           
                  <p>If this option is specified and the SQL code of the stored
                               procedure is not <code>0</code>, no Natural error message will be issued. In
                               this case, the action to be taken in reaction to the SQL code value has to be
                               coded in the invoking Natural object.
                  </p> 
                           
                  <p>The <var>sqlcode</var> field has to be a variable
                               of format/length I4.
                  </p> 
                           
                  <p>If the <code>GIVING <var>sqlcode</var></code>
                               option is omitted, a Natural error message will be issued if the SQL code of
                               the stored procedure is not <code>0</code>.
                  </p> 
               </td> 
                      
            </tr> 
                    
                   
            <tr> 
                       
               <th nowrap> <a name="CALLMODE"></a>CALLMODE=NONE
               </th> 
                       
               <td colspan="2"> 
                  
                  <div><strong class="floating-title"> CALLMODE Parameter:</strong></div> 
                           
                  <p>With Natural for Windows, Natural for UNIX and Natural for OpenVMS,
                               no <code>CALLMODE</code> must be specified.
                  </p> 
               </td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
        
        
      <div class="noprint">
         <p><a href="calldbpr_sql.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Example_calldbpr_sql"></a></div> 
         
      <h2> Example</h2> 
          
          
      <p>The following example shows a Natural program that calls the stored
              procedure <code>DEMO_PROC</code> to retrieve all names of table
              <code>PERSON</code> that belong to a given range.
      </p> 
          
      <p>Three parameter fields are passed to <code>DEMO_PROC</code>: the first
              and second parameters pass starting and ending values of the range of names to
              the stored procedure, and the third parameter receives a name that meets the
              criterion.
      </p> 
          
      <p>In this example, the names are returned in a result set that is
              processed using the <a href="readresu_sql.htm#readresu_sql"><code>READ RESULT
               SET</code></a> statement.
      </p> 
          <pre class="verbatim">DEFINE DATA LOCAL
1 PERSON VIEW OF DEMO-PERSON
  2 PERSON_ID
  2 LAST_NAME
1 #BEGIN    (A2) INIT &lt;'AB'&gt;
1 #END      (A2) INIT &lt;'DE'&gt;
1 #RESPONSE (I4) 
1 #RESULT   (I4) 
1 #NAME (A20)
END-DEFINE

...

CALLDBPROC 'DEMO_PROC' DEMO-PERSON #BEGIN (AD=O) #END (AD=O) #NAME (AD=A)
    RESULT SETS #RESULT
    GIVING #RESPONSE
  
READ RESULT SET #RESULT INTO #NAME FROM DEMO-PERSON
    GIVING #RESPONSE
  DISPLAY #NAME
END-RESULT

...

END</pre> 
           
          
        
       <div class="noprint">
         <div class="nospy">
            <p><a href="calldbpr_sql.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/calldbpr_sql.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/calldbpr_sql.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sql-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="flexib.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="commit_sql.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>