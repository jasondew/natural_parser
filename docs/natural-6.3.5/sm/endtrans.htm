
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script language="JavaScript" src="../general/selbox.js"></script><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>END TRANSACTION</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="endtrans" id="16799"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/endtrans.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/endtrans.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="end.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="escape.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Statements&nbsp;&nbsp;&#8212;</span></div>
      </div> 
        
      <div class="nospytext">
         <h1> END TRANSACTION 
               <a name="x93"></a></h1>
      </div> 
         
          
          
      <table border="0" class="syntax" cellpadding="3">  
              
         <tbody align="left" valign="top"> 
                  
            <tr> 
                      
               <td> <a href="endtrans.htm#Function_endtrans"> <code class="keyword">END</code>&nbsp;[<code class="keyword">OF</code>]&nbsp;<code class="keyword">TRANSACTION</code></a> &nbsp;&nbsp;[<a href="endtrans.htm#operand1_endtrans"><var>operand1</var></a>
                          <img src="../graphics/dot3.gif" alt="" width="12" height="4">]
                          
               </td> 
                     
            </tr> 
                 
         </tbody> 
             
      </table> 
          
         
      <p>This document covers the following topics:</p>
         
      <ul>
         <li>
            <p class="initem"><a href="endtrans.htm#Function_endtrans">Function</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#Restriction_endtrans">Restriction</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#syntax_descr_end_transaction">Syntax Description</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#Databases_Affected">Databases Affected</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#db_spec_cons_endtrans">Database-Specific Considerations</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#end_transaction_exa">Examples</a></p>
         </li>
      </ul> 
         
      <p>For an explanation of the symbols used in the syntax diagram, see
             <a href="synsym.htm#Syntax_Symbols">Syntax
            Symbols</a>.
      </p> 
         
      <p>Related Statements: <a href="accept.htm#accept">ACCEPT/REJECT</a>
             | <a href="atbreak.htm#atbreak">AT BREAK</a> |
             <a href="atstart.htm#atstart">AT START OF DATA</a> |
             <a href="atenddat.htm#atenddat">AT END OF DATA</a> |
             <a href="backout.htm#backout">BACKOUT TRANSACTION</a> |
             <a href="before.htm#before">BEFORE BREAK PROCESSING</a> |
             <a href="delete.htm#delete">DELETE</a> | <a href="find.htm#find">FIND</a> | <a href="get.htm#get">GET</a> |
             <a href="getsame.htm#getsame">GET SAME</a> |
             <a href="gettrans.htm#gettrans">GET TRANSACTION DATA</a> |
             <a href="find.htm#find"> </a> <a href="histogra.htm#histogra">HISTOGRAM</a> | <a href="get.htm#get">
                </a> <a href="limit.htm#limit">LIMIT</a> |
             <a href="passw.htm#passw">PASSW</a> | <a href="performb.htm#performb">PERFORM BREAK PROCESSING</a> |
             <a href="read.htm#read">READ</a> | <a href="retry.htm#retry">RETRY</a> | <a href="store.htm#store">STORE</a>
             | <a href="update.htm#update">UPDATE</a> 
      </p> 
         
      <p>Belongs to Function Group:
             <a href="stmt.htm#Database_Access_and_Update">Database Access and
            Update</a></p> 
        
      <hr> 
        
      <div><a name="Function_endtrans"></a></div> 
         
      <h2> Function </h2> 
          
          
      <p>The <code>END TRANSACTION</code> statement is used to indicate the end
              of a logical transaction. A logical transaction is the smallest logical unit of
              work (as defined by the user) which must be performed in its entirety to ensure
              that the information contained in the database is logically consistent.
      </p> 
          
      <p>Successful execution of an <code>END TRANSACTION</code> statement
              ensures that all updates performed during the transaction have been or will be
              physically applied to the database regardless of subsequent user, Natural,
              database or operating system interruption. Updates performed within a
              transaction for which the <code>END TRANSACTION</code> statement has not been
              successfully completed will be backed out automatically.
      </p> 
          
      <p>The <code>END TRANSACTION</code> statement also results in the release
              of all records placed in hold status during the transaction.
      </p> 
          
      <p>The <code>END TRANSACTION</code> statement can be executed based upon a
              logical condition.
      </p> 
          
      <p>For further information, see the section
              <a href="../pg/pg_dbms_ada.htm#pg_dbms_dutp">Database Update -
            Transaction Processing</a> (in the <cite>Programming
                 Guide</cite>).
      </p> 
          
        
        
      <div class="noprint">
         <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Restriction_endtrans"></a></div> 
         
      <h2> Restriction </h2> 
          
          
      <p>This statement cannot be used with Entire System Server.</p> 
          
        
        
      <div class="noprint">
         <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="syntax_descr_end_transaction"></a></div> 
         
      <h2> Syntax Description </h2> 
          
          
      <p>Operand Definition Table:</p> 
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
                
                
                
                
                
                
                
                
                 
               
         <thead align="left" valign="top"> 
                   
            <tr> 
                       
               <th>Operand</th> 
                       
               <th colspan="5" align="center">
                  <a href="synsym.htm#statem_poss_struct">Possible Structure</a> 
               </th> 
                       
               <th colspan="13" align="center">
                  <a href="synsym.htm#statem_poss_form">Possible Formats</a> 
               </th> 
                       
               <th align="center"> <a href="synsym.htm#statem_ref_perm">Referencing
                     Permitted</a> 
               </th> 
                       
               <th align="center"> <a href="synsym.htm#statem_dyn_def">Dynamic
                     Definition</a> 
               </th> 
                      
            </tr> 
                  
         </thead> 
               
         <tbody align="left" valign="top"> 
                   
            <tr> 
                       
               <td> <var>operand1</var> 
               </td> 
                       
               <td>C</td> 
                       
               <td>S</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>N</td> 
                       
               <td>A</td> 
                       
               <td>U</td> 
                       
               <td>N</td> 
                       
               <td>P</td> 
                       
               <td>I</td> 
                       
               <td>F</td> 
                       
               <td>B</td> 
                       
               <td>D</td> 
                       
               <td>T</td> 
                       
               <td>&nbsp;</td> 
                       
               <td>&nbsp;</td> 
                       
               <td align="center">&nbsp;</td> 
                       
               <td align="center">&nbsp;</td> 
                       
               <td align="center">yes</td> 
                       
               <td align="center">no</td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
      <p>Syntax Element Description:</p> 
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
               
         <tbody align="left" valign="top"> 
                   
            <tr> 
                       
               <th nowrap>
                  <a name="operand1_endtrans"></a> <var>operand1</var>
                           
               </th> 
                       
               <td> 
                  
                  <div><strong class="floating-title">Storage of Transaction Data:</strong></div> 
                           
                  <p>For a transaction applied to an Adabas database, you may also use this statement to store transaction-related
                     information. These transaction data must not exceed 2000 bytes. They may be
                               read with a <a href="gettrans.htm#gettrans"><code>GET TRANSACTION
                                     DATA</code></a> statement.
                  </p> 
                           
                  <p>The transaction data are written to the database specified with the
                               profile parameter <a href="../parms/etdb.htm"><code>ETDB</code></a>.
                  </p> 
                           
                  <p>If the <a href="../parms/etdb.htm"><code>ETDB</code></a> parameter is not
                               specified, the transaction data are written to the database specified with the
                               profile parameter <a href="../parms/udb.htm"><code>UDB</code></a> - except on
                               mainframe computers: here, they are written to the database where the Natural
                               Security system file (<a href="../parms/fsec.htm">FSEC</a>) is
                               located (if FSEC is not specified, it is considered to be identical to the
                               Natural system file, <a href="../parms/fnat.htm">FNAT</a>; if
                               Natural Security is not installed, the transaction data are written to the
                               database where FNAT is located).
                  </p> 
               </td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
        
        
      <div class="noprint">
         <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Databases_Affected"></a></div> 
         
      <h2> Databases Affected</h2> 
          
          
      <p>An <code>END TRANSACTION</code> statement <em>without</em> transaction
              data (that is, without <a href="endtrans.htm#operand1_endtrans"><var>operand1</var></a>)
              will only be executed if a database transaction under control of Natural has
              taken place. Depending on the setting of the Natural profile parameter
              <a href="../parms/et.htm"><code>ET</code></a>, the
              statement will be executed only for the database affected by the transaction
              (<code>ET=OFF</code>), or for all databases that have been referenced
              since the last execution of a <a href="backout.htm#backout"><code>BACKOUT
               TRANSACTION</code></a> or <code>END TRANSACTION</code> statement
              (<code>ET=ON</code>).
      </p> 
          
      <p>An <code>END TRANSACTION</code> statement
              <var>with</var> transaction data (that is, with specifying
              <var>operand1</var>) will always be executed and the
              transaction data be stored in a database as described in the following section.
              It depends on the setting of the <a href="../parms/et.htm"><code>ET</code></a> parameter (see
              above) for which other databases the <code>END TRANSACTION</code> statement
              will be executed.
      </p> 
          
        
        
      <div class="noprint">
         <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="db_spec_cons_endtrans"></a></div> 
         
      <h2> Database-Specific Considerations </h2> 
          
           
           
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
               
         <tbody align="left" valign="top"> 
                    
                    
                   
            <tr> 
                       
               <th nowrap>
                  <a name="Considerations_SQL_endtrans"></a>SQL Databases 
               </th> 
                       
               <td> As most SQL databases close all cursors when a logical unit of
                  work ends, an <code>END TRANSACTION</code> statement must not be placed within
                           a database modification loop; instead, it has to be placed after such a loop.
                           
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th nowrap> <a name="con_xml_db_endtrans"></a>XML Databases 
               </th> 
                       
               <td> An <code>END TRANSACTION</code> statement must not be placed
                  within a database modification loop; instead, it has to be placed after such a
                           loop. 
               </td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
        
        
      <div class="noprint">
         <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="end_transaction_exa"></a></div> 
         
      <h2> Examples </h2>
      <ul>
         <li>
            <p class="initem"><a href="endtrans.htm#Example_1_endtrans">Example 1 - END TRANSACTION</a></p>
         </li>
         <li>
            <p class="initem"><a href="endtrans.htm#Example_2_endtrans">Example 2 - END TRANSACTION with ET Data</a></p>
         </li>
      </ul>
      <div><a name="Example_1_endtrans"></a></div> 
          
      <h3>Example 1 - END TRANSACTION</h3> 
           
           <pre class="verbatim">** Example 'ETREX1': END TRANSACTION                                    
**                                                                      
** <strong>CAUTION: Executing this example will modify the database records!</strong>    
************************************************************************
DEFINE DATA LOCAL                                                       
1 EMPLOY-VIEW VIEW OF EMPLOYEES                                         
  2 CITY                                                                
  2 COUNTRY                                                             
END-DEFINE                                                              
*                                                                       
<strong>FIND EMPLOY-VIEW WITH CITY = 'BOSTON'                                   
  ASSIGN COUNTRY = 'USA'                                                
  UPDATE                                                                
  END TRANSACTION</strong>                                                      
  /*                                                                    
  AT END OF DATA                                                        
    WRITE NOTITLE *NUMBER 'RECORDS UPDATED'                             
  END-ENDDATA                                                           
  /* 
END-FIND 
END </pre> 
           <h4 class="floating-title">Output of Program ETREX1:</h4> <pre class="system-output">7 RECORDS UPDATED</pre> 
           
          
         <div><a name="Example_2_endtrans"></a></div> 
          
      <h3>Example 2 - END TRANSACTION with ET Data</h3> 
           
           <pre class="verbatim">** Example 'ETREX2': END TRANSACTION (with ET data)                     
**                                                                      
** <strong>CAUTION: Executing this example will modify the database records!</strong>    
************************************************************************
DEFINE DATA LOCAL                                                       
1 EMPLOY-VIEW VIEW OF EMPLOYEES                                         
  2 PERSONNEL-ID                                                        
  2 NAME                                                                
  2 FIRST-NAME                                                          
  2 CITY                                                                
*                                                                       
1 #PERS-NR (A8) INIT &lt;' '&gt;                                              
END-DEFINE                                                              
*                                                                       
REPEAT                                                                  
  INPUT 'ENTER PERSONNEL NUMBER TO BE UPDATED:' #PERS-NR                
  IF #PERS-NR = ' '                                                     
    ESCAPE BOTTOM                                                       
  END-IF                                                                
  /*                                        
  <strong>FIND EMPLOY-VIEW PERSONNEL-ID = #PERS-NR  
    INPUT (AD=M)    NAME / FIRST-NAME / CITY
    UPDATE                                  
    END TRANSACTION #PERS-NR                
  END-FIND </strong>                                 
  /*                                        
END-REPEAT                                  
END         </pre> 
           <h4 class="floating-title">Output of Program ETREX2:</h4> <pre class="system-output">ENTER PERSONNEL NUMBER TO BE UPDATED: 20027800</pre> 
           <h4 class="floating-title">After entering and confirming the personnel
               number:
      </h4> <pre class="system-output">
NAME LAWLER
FIRST-NAME SUNNY
CITY MILWAUKEE</pre> 
           
         
       <div class="noprint">
         <div class="nospy">
            <p><a href="endtrans.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/endtrans.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/endtrans.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="end.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="escape.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>