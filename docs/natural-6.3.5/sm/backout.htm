
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script language="JavaScript" src="../general/selbox.js"></script><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>BACKOUT TRANSACTION</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="backout" id="16756"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/backout.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/backout.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="attoppag.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="before.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Statements&nbsp;&nbsp;&#8212;</span></div>
      </div> 
        
      <div class="nospytext">
         <h1>BACKOUT TRANSACTION 
               <a name="x34"></a></h1>
      </div> 
         
          
          
      <table border="0" class="syntax" cellpadding="3">  
              
         <tbody align="left" valign="top"> 
                  
            <tr> 
                      
               <td nowrap> <a href="backout.htm#Function_backout">
                      <code class="keyword">BACKOUT</code> [<code class="keyword">TRANSACTION</code>]</a></td> 
                     
            </tr> 
                 
         </tbody> 
             
      </table> 
          
         
      <p>This document covers the following topics:</p>
         
      <ul>
         <li>
            <p class="initem"><a href="backout.htm#Function_backout">Function</a></p>
         </li>
         <li>
            <p class="initem"><a href="backout.htm#restriction_backout">Restriction</a></p>
         </li>
         <li>
            <p class="initem"><a href="backout.htm#db_spec_cons_backout">Database-Specific Considerations</a></p>
         </li>
         <li>
            <p class="initem"><a href="backout.htm#Example_backout">Example</a></p>
         </li>
      </ul> 
         
      <p>For an explanation of the symbols used in the syntax diagram, see
             <a href="synsym.htm#Syntax_Symbols">Syntax
            Symbols</a>.
      </p> 
         
      <p>Related Statements: <a href="endtrans.htm#endtrans"></a>
             <a href="accept.htm#accept">ACCEPT/REJECT</a> |
             <a href="atbreak.htm#atbreak">AT BREAK</a> | <a href="atstart.htm#atstart">AT START OF DATA</a> | <a href="atenddat.htm#atenddat">AT END OF DATA</a> | <a href="before.htm#before">BEFORE BREAK PROCESSING</a> |
             <a href="delete.htm#delete">DELETE</a> | <a href="endtrans.htm#endtrans">END TRANSACTION</a> | <a href="find.htm#find">FIND</a> | <a href="get.htm#get">GET</a> |
             <a href="getsame.htm#getsame">GET SAME</a> |
             <a href="gettrans.htm#gettrans">GET TRANSACTION DATA</a> |
             <a href="delete.htm#delete"></a> <a href="histogra.htm#histogra">HISTOGRAM</a> | <a href="get.htm#get"></a>
             <a href="limit.htm#limit">LIMIT</a> | <a href="passw.htm#passw">PASSW</a> | <a href="performb.htm#performb">PERFORM BREAK
                PROCESSING</a> | <a href="read.htm#read">READ</a> |
             <a href="retry.htm#retry">RETRY</a> | <a href="store.htm#store">STORE</a> | <a href="update.htm#update">UPDATE</a></p> 
         
      <p>Belongs to Function Group:
             <a href="stmt.htm#Database_Access_and_Update">Database Access and
            Update</a></p> 
        
      <hr> 
        
      <div><a name="Function_backout"></a></div> 
         
      <h2>Function</h2> 
          
          
      <p>The <code>BACKOUT TRANSACTION</code> statement is used to back out all
              database updates performed during the current logical transaction. This
              statement also releases all records held during the transaction.
      </p> 
          
      <p>The statement is executed only if a database transaction under control
              of Natural has taken place. For which databases the statement is executed
              depends on the setting of the profile parameter <a href="../parms/et.htm"><code>ET</code></a> (execution of
              <code>END/BACKOUT TRANSACTION</code> statements):
      </p> 
          
      <ul> 
              
         <li> 
                  
            <p class="initem">If <code>ET=OFF</code>, the statement is executed only for the
                      database affected by the transaction.
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">If <code>ET=ON</code>, the statement is executed for all databases
                      that have been referenced since the last execution of a <code>BACKOUT
                  TRANSACTION</code> or <a href="endtrans.htm#endtrans"><code>END
                     TRANSACTION</code></a> statement.
            </p> 
                 
         </li> 
             
      </ul> 
          
         
      <div><a name="Backout_Transaction_Issued_by_Natural"></a></div> 
          
      <h3>Backout Transaction Issued by Natural</h3> 
           
           
      <p>If the user interrupts the current Natural operation with a terminal
               command (command <a href="../tcom/pcpc.htm"><code>%%</code></a> or
               <a href="../tcom/keys.htm"><span class="key">CLEAR</span></a> key), Natural
               issues a <code>BACKOUT TRANSACTION</code> statement.
      </p> 
           
      <p>See also the terminal command <a href="../tcom/pcpc.htm"><code>%%</code></a> in the <cite>Terminal
                  Commands</cite> documentation.
      </p> 
           
          
         
      <div><a name="Additional_Information"></a></div> 
          
      <h3>Additional Information</h3> 
           
           
      <p>For additional information on the use of the transaction backout
               feature, see the sections <a href="../pg/pg_dbms_ada.htm#pg_dbms_dutp">Database Update - Transaction
            Processing</a> and
               <a href="../pg/pg_dbms_ada.htm#Backing_Out_a_Transaction">Backing Out a
            Transaction</a> in the <cite>Programming
                  Guide</cite>.
      </p> 
           
          
        
        
      <div class="noprint">
         <p><a href="backout.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="restriction_backout"></a></div> 
         
      <h2>Restriction</h2> 
          
          
      <p>This statement is not available with Entire System Server.</p> 
          
        
        
      <div class="noprint">
         <p><a href="backout.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="db_spec_cons_backout"></a></div> 
         
      <h2>Database-Specific Considerations</h2> 
          
           
           
      <table border="1" class="color" cellpadding="3" width="97%">
         <colgroup>
            <col width="31%">
            <col width="66%">
         </colgroup> 
               
         <tbody align="left" valign="top"> 
                    
                   
            <tr> 
                       
               <th><a name="Considerations_for_SQL_Databases_backout"></a>SQL Databases
               </th> 
                       
               <td>As most SQL databases close all cursors when a
                  logical unit of work ends, a <code>BACKOUT TRANSACTION</code> statement must
                  not be placed within a database modification loop; instead, it has to be placed
                           after such a loop. 
               </td> 
                      
            </tr> 
                   
            <tr> 
                       
               <th><a name="con_xml_db"></a>XML
                  Databases
               </th> 
                       
               <td>A <code>BACKOUT TRANSACTION</code> statement must
                  not be placed within a database modification loop; instead, it has to be placed
                     after such a loop.
               </td> 
                      
            </tr> 
                  
         </tbody> 
              
      </table> 
           
          
        
        
      <div class="noprint">
         <p><a href="backout.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="Example_backout"></a></div> 
         
      <h2>Example</h2> 
          
          <pre class="verbatim">** Example 'BOTEX1': BACKOUT TRANSACTION                                
**                                                                      
** CAUTION: Executing this example will modify the database records!    
************************************************************************
DEFINE DATA LOCAL                                                       
1 EMPLOY-VIEW VIEW OF EMPLOYEES                                         
  2 NAME                                                                
  2 DEPT                                                                
  2 LEAVE-DUE                                                           
  2 LEAVE-TAKEN                                                         
*                                                                       
1 #DEPT (A6)                                                            
1 #RESP (A3)                                                            
END-DEFINE                                                              
*                                                                       
LIMIT 3                                                                 
INPUT 'DEPARTMENT TO BE UPDATED:' #DEPT                                 
IF #DEPT = ' '                                                          
  STOP                                                                  
END-IF                                       
*                                            
FIND EMPLOY-VIEW WITH DEPT = #DEPT           
  IF NO RECORDS FOUND                        
    REINPUT 'NO RECORDS FOUND'               
  END-NOREC                                  
  INPUT 'NAME:       ' NAME (AD=O) /         
        'LEAVE DUE:  ' LEAVE-DUE (AD=M) /    
        'LEAVE TAKEN:' LEAVE-TAKEN (AD=M)    
  UPDATE                                     
END-FIND                                     
*                                            
INPUT 'UPDATE TO BE PERFORMED? YES/NO:' #RESP
<strong>DECIDE ON FIRST #RESP                        
  VALUE 'YES'                                
    END TRANSACTION                          
  VALUE 'NO'                                 
    BACKOUT TRANSACTION                      
  NONE                                       
    REINPUT 'PLEASE ENTER YES OR NO' 
END-DECIDE</strong>
*                                    
END                                 </pre> 
          <h4 class="floating-title">Output of Program BOTEX1:</h4> <pre class="system-output">DEPARTMENT TO BE UPDATED: <strong>MGMT30</strong></pre> 
          <p>Result for department MGMT30:</p> <pre class="system-output">NAME:        POREE
LEAVE DUE:   45
LEAVE TAKEN: 31</pre> 
          <p>Confirmation query:</p> <pre class="system-output">UPDATE TO BE PERFORMED  YES/NO: <strong>NO</strong></pre> 
          
        
       <div class="noprint">
         <div class="nospy">
            <p><a href="backout.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../sm/backout.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/sm/backout.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="sm-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="attoppag.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="before.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>