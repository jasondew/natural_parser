
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <meta name="generator" content="Sagdoc XSL Stylesheets">
      <link rel="stylesheet" type="text/css" href="../general/style2.css"><script type="text/javascript" language="javascript">
         <!--
window.name = 'contents';
//--></script><title>Setting Up a Natural RPC Environment</title>
   </head>
   <body bgcolor="#FFFFFF" background="../graphics/bar.png" style="margin-left: 20px;">
      <div><a name="setup"></a></div>
      <div class="noprint">
         <div class="nospytext">
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td colspan="2" class="topline"><a name="Top"></a>&nbsp;<img src="../graphics/natux_logo.png"></td>
                  <td class="topline" align="right"><img src="../graphics/sag_logo.png">&nbsp;
                  </td>
               </tr>
               <tr>
                  <td class="header" nowrap><img src="../graphics/blank.png" width="3" height="10"></td>
                  <td class="header"><img src="../graphics/blank.png" width="3">Version&nbsp;6.3.5 for UNIX
                  </td>
                  <td class="toplinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../rpc/setup.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/rpc/setup.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="rpc-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="limits.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="start.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div class="nospytext" style="margin-top:0.25in;">
         <div><span class="module">&nbsp;&#8212;&nbsp;&nbsp;Natural Remote Procedure Call (RPC)&nbsp;&nbsp;&#8212;</span></div>
      </div> 
        
      <div class="nospytext">
         <h1>Setting Up a Natural RPC Environment</h1>
      </div> 
         
      <p>To set up a Natural RPC environment, you must perform the steps described
             below for all client Naturals and server Naturals and read the
             platform-specific notes and considerations.
      </p>
         
      <ul>
         <li>
            <p class="initem"><a href="setup.htm#setup_Setting_Up_a_Natural_Client">Setting Up a Natural Client</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_Setting_Up_A_Natural_Server">Setting Up a Natural Server</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_Setting_Up_an_EntireX_Broker_Access">Setting Up an EntireX Broker Access</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_Setting_Up_an_EntireX_Broker_Environment">Setting Up an EntireX Broker Environment</a></p>
         </li>
      </ul>
      <hr>
      <div><a name="setup_Setting_Up_a_Natural_Client"></a></div> 
         
      <h2>Setting Up a Natural Client</h2> 
          
      <p>Unless otherwise noted, this instruction applies to all
              environments.
      </p> 
          
      <p>To set up a Natural client, perform the following steps:</p> 
          
      <ul> 
              
         <li> 
                  
            <p class="initem"><a href="setup.htm#setup_rpc_setup_client_srv_name">Define the Server
                         Name</a></p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem"><a href="setup.htm#setup_rpc_setup_client_stub_gen">Generate a Stub
                         Subprogram</a></p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem"><a href="setup.htm#setup_rpc_setup_client_profparms">Set the RPC
                         Client-Specific Natural Parameters</a></p> 
                 
         </li> 
             
      </ul>
      <div><a name="setup_rpc_setup_client_srv_name"></a></div> 
          
      <h3>Define the Server Name</h3> 
           
           
      <p>Use the <a href="../utis/sysrpc_sm.htm">Service
            Directory Maintenance</a> function of the
               <a href="../utis/sysrpc-over.htm"><code>SYSRPC</code></a> utility
               to define the name of the server to be used for each
               <a href="../sm/callnat.htm"><code>CALLNAT</code></a> statement to
               be executed remotely.
      </p> 
           
      <p>For details and example screens, refer to <a href="../utis/sysrpc_sm.htm#sysrpc_sm_Invoking_Service_Directory_Maintenance">Invoking
            Service Directory Maintenance</a> (in the <code>SYSRPC</code> utility
               documentation).
      </p> 
           
      <p>The generated directory subprogram <code>NATCLTGS</code> must be made
               available to the Natural client application. If you have not generated
               <code>NATCLTGS</code> in your client library, move <code>NATCLTGS</code> to
               this library or to one of the steplibs.
      </p> 
           
      <p>Optionally, you can use one of the following server selection
               techniques:
      </p> 
           
      <ul> 
               
         <li> 
                   
            <h4 class="floating-title">Address a default server</h4> 
                   
            <p class="initem">See <a href="oper.htm#oper_Spec_Default_Server_Dynamic">Specifying a Default
                  Server Address within a Natural Session</a>, or
                       profile parameter <a href="../parms/dfs.htm"><code>DFS</code></a>.
            </p>
                   
                  
         </li> 
               
         <li> 
                   
            <h4 class="floating-title">Use a remote directory server</h4> 
                   
            <p class="initem"> See <a href="rds.htm#rds_Using_a_Remote_Directory_Server">Using a
                          Remote Directory Server</a>, or profile
                       parameter
                       <a href="../parms/rds.htm"><code>RDS</code></a>.
            </p>
                   
                  
         </li> 
              
      </ul> 
           
      <p><span class="selectable_label">Note for Windows, UNIX and OpenVMS
            Environments:</span></p> 
           
      <p> Predict servers are not maintained in the <code>SYSRPC</code> utility.
               
      </p> 
           
      <p>For information on how to connect to a Predict server, see the profile
               parameter <a href="../parms/usedic.htm"><code>USEDIC</code></a> or the
               <a href="../config/cfg-confparm.htm#cfg-cf-glo-dict">Dictionary Server
            Assignments</a> function in the Global Configuration File.
      </p>
           
          
      <div><a name="setup_rpc_setup_client_stub_gen"></a></div> 
          
      <h3>Generate a Client Stub Subprogram</h3> 
           
           
      <p>This step applies only if you do not want to or cannot work with
               automatic Natural RPC execution (see <cite>Operating a Natural RPC
                  Environment</cite>,
               <a href="oper.htm#oper_Working_with_Automatic_Natural_RPC_Execution">Working
            with Automatic Natural RPC Execution</a>).
      </p> 
           
      <p>For each <code>CALLNAT</code> statement to be executed remotely, use
               the Stub Generation function of the <a href="../utis/sysrpc-over.htm"><code>SYSRPC</code></a> utility; see
               <a href="oper.htm#oper_Creating_Stub_Subprograms">Creating Stub
            Subprograms</a>.
      </p> 
           
      <p>Note that the generated stub must be made available to the Natural
               client environment. If you did not generate the stub subprogram (<a href="intro_rpc.htm#interface-object">interface object</a>) in your client
               library, move the stub subprogram to this library or to one of the
               steplibs.
      </p> 
          
      <div><a name="setup_rpc_setup_client_profparms"></a></div> 
          
      <h3>Set the RPC Client-Specific Natural Parameters</h3> 
           
           
      <p>Set the Natural profile
               parameters
               which are relevant to the client-specific handling of remote procedure
               calls.
      </p> 
           
      <h4 class="floating-title">Mandatory Parameters:</h4> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th><strong>Parameter</strong></th> 
                        
               <th><strong>Function</strong></th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td><a href="../parms/maxbuff.htm"><code>MAXBUFF</code></a></td> 
                        
               <td>Maximum buffer size (for automatic RPC execution only)</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>RPCSIZE</code></td> 
                        
               <td>Size of buffer used by Natural RPC (for
                  mainframe clients only)
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <h4 class="floating-title">Optional Parameters:</h4> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th><strong>Parameter</strong></th> 
                        
               <th><strong>Function</strong></th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td><a href="../parms/acivers.htm"><code>ACIVERS</code></a></td> 
                        
               <td>Define ACI version for use with EntireX Broker
                  ACI 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/autorpc.htm"><code>AUTORPC</code></a></td> 
                        
               <td>Automatic Natural RPC execution</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/compr.htm"><code>COMPR</code></a></td> 
                        
               <td>Set RPC buffer compression 
                  
                  <p>See also <cite>Operating a Natural RPC Environment</cite>,
                                <a href="oper.htm#oper_Using_Compression">Using
                                   Compression</a>.
                  </p>
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/cprpc.htm"><code>CPRPC</code></a></td> 
                        
               <td>Define code page name</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/dfs.htm"><code>DFS</code></a></td> 
                        
               <td>Specify RPC client's default server
                  address
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/rds.htm"><code>RDS</code></a></td> 
                        
               <td>Define remote directory server</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/rpcsdir.htm"><code>RPCSDIR</code></a></td> 
                        
               <td>Specify name of Natural library in which the
                  Service Directory is located (for mainframe, UNIX and OpenVMS servers
                  only)
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/timeout.htm"><code>TIMEOUT</code></a></td> 
                        
               <td>Wait time for RPC server response</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><a href="../parms/tryalt.htm"><code>TRYALT</code></a></td> 
                        
               <td>Try alternative server address</td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>The following notes apply to the use of the EntireX Broker.</p> 
           
      <p class="notes"><strong>Notes:</strong></p>
      <ol class="note-list"> 
               
         <li>1. The names specified with the <a href="../parms/dfs.htm"><code>DFS</code></a> parameter must
                   identify an active EntireX Broker and must match a server definition in the
                   EntireX Broker Attribute File, see
                   <a href="setup.htm#setup_Setting_Up_an_EntireX_Broker_Environment">Setting Up
               an EntireX Broker Environment</a>.
         </li> 
               
         <li>2. The wait time specified with
                   <a href="../parms/timeout.htm"><code>TIMEOUT</code></a>
                   is used to set the <code>WAIT</code> field of the EntireX Broker ACI. If
                   <code>TIMEOUT</code> is set to zero, <code>WAIT=YES</code> is set and
                   the client will wait for the <code>CLIENT-NONACT</code> time. If the wait time
                   has elapsed, the remote procedure call is terminated with a corresponding error
                   message. The use of <code>TIMEOUT</code> enables you to take
                   advantage of the transport timeout mechanism provided by the EntireX Broker
                   stubs.
         </li> 
              
      </ol> 
          
      <div class="noprint">
         <p><a href="setup.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="setup_Setting_Up_A_Natural_Server"></a></div> 
         
      <h2>Setting Up a Natural Server</h2> 
          
      <p>A Natural server is a Natural task (<a href="intro_rpc.htm#intro_rpc_rpc_terms_server_task">server task</a>) that can
              execute Natural subprograms (services). This Natural task is typically an
              asynchronous or background
              task (detached process). The EntireX Broker and the client identify
              it by using a <var>nodename</var> and a
              <var>servername</var>.
      </p> 
          
      <p>To set up a Natural server perform the steps described below:</p>
          
      <ul>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_srv_profparms">Set the RPC Server-Specific Natural Parameters</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_srv_cmd_mode">Ensure Command Mode Usage in Server Session</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_srv_unique_etid">Ensure Unique Adabas ETID Usage</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_srv_start">Start a Natural Server</a></p>
         </li>
      </ul>
      <div><a name="setup_rpc_setup_srv_profparms"></a></div> 
          
      <h3>Set the RPC Server-Specific Natural Parameters</h3> 
           
           
      <p>Set the platform-dependent Natural parameters which are relevant to the
               general and server-specific handling of remote procedure calls for the server
               Natural.
      </p> 
           
      <h4 class="floating-title">For Mainframe Servers:</h4> 
           
      <ol> 
               
         <li> 
                   
            <p class="initem">Create an RPC-specific Natural parameter module.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Set the keyword subparameters of profile parameter
                       <code>RPC</code> or parameter macro
                       <code>NTRPC</code> (see table below) as
                       desired.
            </p> 
                  
         </li> 
              
      </ol> 
           
      <h4 class="floating-title">For Windows, UNIX or OpenVMS Servers:</h4> 
           
      <ol> 
               
         <li> 
                   
            <p class="initem">Create an RPC-specific Natural parameter file.</p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Set the Natural profile parameters (see table below) as desired.</p> 
                  
         </li> 
              
      </ol> 
           
      <h4 class="floating-title">Mandatory Parameters:</h4> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th align="left"><strong>Parameter</strong></th> 
                        
               <th align="left"><strong>Function</strong></th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/maxbuff.htm"><code>MAXBUFF</code></a></td> 
                        
               <td align="left">Maximum buffer size</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><code>RPCSIZE</code></td> 
                        
               <td align="left">Size of buffer used by Natural RPC
                  (for mainframe servers only)
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/server.htm"><code>SERVER</code></a></td> 
                        
               <td align="left">Start Natural session as an RPC server
                  session
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvname.htm"><code>SRVNAME</code></a></td> 
                        
               <td align="left">Name of RPC server; see <cite>Note for EntireX
                               Broker</cite> below.
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvnode.htm"><code>SRVNODE</code></a></td> 
                        
               <td align="left"> 
                  
                  <p>Name of node; see <cite>Note for EntireX Broker</cite>
                                below.
                  </p> 
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <h4 class="floating-title">Optional Parameters:</h4> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th align="left"><strong>Parameter</strong></th> 
                        
               <th align="left"><strong>Function</strong></th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/acivers.htm"><code>ACIVERS</code></a></td> 
                        
               <td align="left">Define ACI version for use with
                  EntireX Broker ACI
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/cprpc.htm"><code>CPRPC</code></a></td> 
                        
               <td align="left">Define code page name</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/logonrq.htm"><code>LOGONRQ</code></a></td> 
                        
               <td align="left">Logon for RPC server request
                  required
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><code>NTASKS</code></td> 
                        
               <td align="left">Minimum and maximum of the number
                  or server replicas (for mainframe servers only)
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvcmit.htm"><code>SRVCMIT</code></a></td> 
                        
               <td align="left">Time at which a Natural RPC server
                  automatically commits an RPC conversation or a non-conversational RPC
                  request
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvterm.htm"><code>SRVTERM</code></a></td> 
                        
               <td align="left">Server termination event</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvuser.htm"><code>SRVUSER</code></a></td> 
                        
               <td align="left">User ID for RPC server registry</td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/srvwait.htm"><code>SRVWAIT</code></a></td> 
                        
               <td align="left">Wait time of RPC server for client request</td>
                        
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/trace.htm"><code>TRACE</code></a></td>
                        
                        
               <td align="left">Define trace level for Natural RPC
                  servers
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td align="left"><a href="../parms/transp.htm"><code>TRANSP</code></a></td> 
                        
               <td align="left">Server transport protocol (no longer
                  required)
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
           
      <p>The following notes apply to the use of the EntireX Broker.</p> 
           
      <p class="notes"><strong>Notes:</strong></p>
      <ol class="note-list"> 
               
         <li>The name specified with <code>SRVNODE</code> must identify an
                   active EntireX Broker and the name specified with
                   <code>SRVNAME</code> must match a server definition in the EntireX
                   Broker Attribute File, see
                   <a href="setup.htm#setup_Setting_Up_an_EntireX_Broker_Environment">Setting Up
               an EntireX Broker Environment</a>.
         </li> 
               
         <li>The wait time specified with the
                   <a href="../parms/srvwait.htm"><code>SRVWAIT</code></a>
                   parameter is used to set the <code>WAIT</code> field of the EntireX Broker ACI.
                   If <code>SRVWAIT</code> is not specified or set to zero,
                   <code>WAIT=YES</code> is set and the server will wait for the
                   <code>SERVER-NONACT</code> time. If the wait time has elapsed, a corresponding
                   message is written to the RPC server trace file and the RPC server continues to
                   wait for the next client request. The use of the <code>SRVWAIT</code>
                   parameter enables you to take advantage of the transport timeout mechanism
                   provided by the EntireX Broker stubs. 
         </li> 
              
      </ol> 
          
      <div><a name="setup_rpc_setup_srv_cmd_mode"></a></div> 
          
      <h3>Ensure Command Mode Usage in Server Session</h3> 
           
           
      <p class="to"><img src="../graphics/bluearro.png" alt="Start of instruction set" width="18" height="15"><strong>To ensure that your Natural server session will enter command
                   mode</strong></p>
      <ul>
         <li> 
                    
                    
            <p class="instep">disable Natural menu mode by setting the Natural profile parameter
                        <code>MENU</code><code>=OFF</code> (applies
                        to mainframe servers only).
            </p> 
                    
                  
         </li>
      </ul> 
            
            
      <table border="0" cellpadding="3" width="97%"> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td><img src="../graphics/warning.png" alt="Warning" width="28" height="28"></td> 
                        
               <td> 
                  
                  <div><strong class="floating-title">Do not:</strong></div> 
                            
                  <ul> 
                                
                     <li> 
                                    
                        <p class="initem">put a program onto the Natural stack which never terminates.</p>
                                    
                                   
                     </li> 
                                
                     <li> 
                                    
                        <p class="initem">use a <code>STARTUP</code> program which never terminates.
                        </p> 
                                   
                     </li> 
                                
                     <li> 
                                    
                        <p class="initem">disallow <code>NEXT</code> mode in Natural Security for your
                                        server library.
                        </p> 
                                   
                     </li> 
                               
                  </ul> 
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
          
      <div><a name="setup_rpc_setup_srv_unique_etid"></a></div> 
          
      <h3>Ensure Unique Adabas ETID Usage</h3> 
           
           
      <p>Ensure that the Adabas <code>ETID</code> used by the Natural server
               session is unique within a certain Adabas nucleus.
      </p> 
          
      <div><a name="setup_rpc_setup_srv_start"></a></div> 
          
      <h3>Start a Natural Server</h3> 
           
           
      <p>To start a Natural server, proceed as described in the section
               <a href="start.htm#start">Starting a Natural RPC
            Server</a>.
      </p> 
           
      <p>This server then waits for remote <code>CALLNAT</code> requests from a
               client.
      </p> 
           
      <p><strong>Note for Natural in Batch Mode on z/OS or on
                  z/VSE:</strong></p> 
           
      <p> For information about servers using the keyword subparameter
               <code>NTASKS</code> of profile
               parameter <code>RPC</code> or parameter macro
               <code>NTRPC</code>, refer to
               <a href="start.htm#start_Considerations_for_Natural_RPC_Servers_with_Replicates">Considerations
            for Mainframe Natural RPC Servers with Replicas</a>.
      </p> 
          
      <div class="noprint">
         <p><a href="setup.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="setup_Setting_Up_an_EntireX_Broker_Access"></a></div> 
         
      <h2>Setting Up an EntireX Broker Access</h2> 
          
      <p>To set up an EntireX Broker interface, perform the steps described
              below:
      </p> 
      <ul>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_etx_broker_stub_access">Provide Access to the EntireX Broker Stub</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_rpc_setup_etx_broker_acivers">Set the ACI Version</a></p>
         </li>
         <li>
            <p class="initem"><a href="setup.htm#setup_tcpip">Using TCP/IP as Transport Method</a></p>
         </li>
      </ul>
      <div><a name="setup_rpc_setup_etx_broker_stub_access"></a></div> 
          
      <h3>Provide Access to the EntireX Broker Stub</h3> 
           
      <p>Make the EntireX Broker stub accessible to your Natural environment.
               This step depends on the platform used.
      </p>
           
      <ul>
         <li><a href="setup.htm#setup_rpc_setup_etx_broker_stub_access_mf">Providing Access to the EntireX Broker Stub on Mainframe</a></li>
         <li><a href="setup.htm#setup_rpc_setup_etx_broker_stub_access_ux">Providing Access to the EntireX Broker Stub on UNIX</a></li>
         <li><a href="setup.htm#setup_rpc_setup_etx_broker_stub_access_win">Providing Access to the EntireX Broker Stub on Windows</a></li>
      </ul>
      <div><a name="setup_rpc_setup_etx_broker_stub_access_mf"></a></div> 
           
      <h4>Providing Access to the EntireX Broker Stub on Mainframe</h4> 
            
            
      <p>Link the EntireX Broker stub <code>NATETB23</code> to your Natural or
                specify the profile parameter <code>RCA</code><code>=BROKER</code> to load
                <code>NATETB23</code> dynamically at run-time.
      </p> 
            
      <p>In the following cases <code>NATETB23</code> cannot be used and you
                must use a different Broker stub:
      </p> 
            
      <ul> 
                
         <li> 
                    
            <p class="initem">If you want to use the TCP/IP protocol under BS2000/OSD, you must
                        use <code>BKIMBTIA</code> instead.
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If you want to use impersonation in z/OS batch mode, you must use
                        <code>BKIMBTSO</code> instead.
            </p> 
                   
         </li> 
                
         <li> 
                    
            <p class="initem">If you want to use impersonation under CICS, you must use
                        <code>CICSETB</code> instead. 
            </p> 
                    
            <p class="note"><strong>Note:</strong><br> You must link <code>CICSETB</code> to your Natural CICS
                        interface nucleus.
            </p> 
                   
         </li> 
               
      </ul> 
            
      <p>To load <code>BKIMBTIA</code> or <code>BKIMBTSO</code> dynamically at
                run-time, specify <code>RCA</code>=<code>BROKER
            RCALIAS=(BROKER,<var>stubname</var>)</code>.
      </p> 
            
      <p>It is currently not possible to load <code>CICSETB</code> dynamically
                at run-time.
      </p> 
            
      <p>Refer to the EntireX Communicator documentation for further
                details.
      </p> 
           
      <div><a name="setup_rpc_setup_etx_broker_stub_access_ux"></a></div> 
           
      <h4>Providing Access to the EntireX Broker Stub on UNIX</h4> 
            
            
      <p>Copy the Natural-specific broker stub <code>natetb.so</code> /
                <code>natetb.sl</code> from the directory <code>$EXXDIR/$EXX/VERS/lib</code> to
                the directory specified with <code>NATEXTLIB</code> in the Local Configuration
                File <a href="../config/cfg-confparm.htm#cfg-cf-local">NATURAL.INI</a>.
      </p>
            
           
      <div><a name="setup_rpc_setup_etx_broker_stub_access_win"></a></div> 
           
      <h4>Providing Access to the EntireX Broker Stub on Windows</h4> 
            
            
      <p>The EntireX Broker stub is made available automatically in the course
                of the EntireX installation.
      </p> 
           
      <div><a name="setup_rpc_setup_etx_broker_acivers"></a></div> 
          
      <h3>Set the ACI Version</h3> 
           
           
      <p>Set the profile parameter <a href="../parms/acivers.htm"><code>ACIVERS</code></a>
               according to your requirements.
      </p> 
           
      <p class="note"><strong>Note:</strong><br> The <code>ACIVERS</code> value set in the Natural
               parameter module (mainframe) or parameter file (Windows, UNIX or OpenVMS) can
               only work if also the EntireX Broker and the EntireX Broker stub support this
               version.
      </p> 
           
      <p>The table below contains only those <code>ACIVERS</code>
               values which are associated with a feature that is relevant for the Natural
               RPC. 
      </p> 
            
            
      <table border="1" class="color" cellpadding="3" width="97%"> 
                
         <thead align="left" valign="top"> 
                    
            <tr> 
                        
               <th>Setting</th> 
                        
               <th>Function</th> 
                       
            </tr> 
                   
         </thead> 
                
         <tbody align="left" valign="top"> 
                    
            <tr> 
                        
               <td><code>ACIVERS=2</code></td> 
                        
               <td> 
                  
                  <p>(Default) Support of the EntireX Broker functions
                                <code>LOGON</code> and <code>LOGOFF</code>.
                  </p> 
                            
                  <p>The server performs a <code>LOGON</code> to the
                                EntireX Broker before executing the <code>REGISTER</code>, and a
                                <code>LOGOFF</code> after the
                                <code>DEREGISTER</code>. 
                  </p> 
                            
                  <p>This does not imply any security checks, but it is a pure EntireX
                                Broker management function, see EntireX Broker function <code>LOGON</code> in
                                the EntireX Broker documentation.
                  </p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=3</code></td> 
                        
               <td> 
                  
                  <p>Support of EntireX Broker non-numeric conversation IDs and data
                     volume &gt; 30 KB.
                  </p> 
                            
                  <p>When <code>ACIVERS</code> is set to 3 or higher, the
                                EntireX Broker will also assign non-numeric conversation IDs.
                  </p> 
                            
                  <p> If a Natural client issues an <a href="../sm/opencon.htm"><code>OPEN CONVERSATION</code></a> statement and
                                the client's <code>ACIVERS</code> is 3 or higher, the EntireX Broker
                                will be able to automatically assign non-numeric conversation IDs. It will not
                                check whether the associated server does accept non-numeric conversation IDs,
                                but only the <code>ACIVERS</code> of the requestor (a Natural client
                                in this case) will be decisive.
                  </p> 
                            
                  <p> Therefore, make sure that both the Natural client and the server
                                support the corresponding ACI version.
                  </p> 
                            
                  <p>In addition, with EntireX Broker ACI Version 3 or higher, the data
                                volume which can be exchanged between client and server in a single request may
                                exceed 30 KB if transport method TCP/IP is used.
                  </p> 
                            
                  <p class="notes"><strong>Notes:</strong></p>
                  <ol class="note-list"> 
                                
                     <li>With EntireX Broker ACI Version 1 or 2, the data volume is
                                    limited to 30 KB.
                     </li> 
                                
                     <li>With transport method NET, the EntireX Broker attribute
                                    <code>EXTENDED-ACB-SUPPORT</code> must be set to <code>YES</code> in order to
                                    support more than 30 KB.
                     </li> 
                               
                  </ol> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=4</code></td> 
                        
               <td> 
                  
                  <p>Support of code pages and (for servers only) Natural Security.</p>
                            
                            
                  <p>With EntireX Broker ACI Version 4 or higher, the Natural RPC
                     supports code pages. For this, the name of the code page can be specified in
                                the profile parameter <a href="../parms/cprpc.htm"><code>CPRPC</code></a>
                                for clients and servers.
                  </p> 
                            
                  <p> The evaluation of the code page is done by the EntireX Broker.
                                The EntireX Broker translates the RPC data sent according to the code page of
                                client and server to the corresponding target code page.
                  </p> 
                            
                  <p> The profile parameter <a href="../parms/cprpc.htm"><code>CPRPC</code></a>
                                can be set on the client and/or on the server. It applies for the current
                                process. This means that the client code page does not need to be identical
                                with the server code page.
                  </p> 
                            
                  <p> The server is enabled to logon to the EntireX Broker using a
                                qualified user ID.
                  </p> 
                            
                  <p> If the profile parameter <a href="../parms/srvuser.htm"><code>SRVUSER</code></a>
                                
                                is set to <code>*NSC</code> and the server is running under Natural Security,
                                the Natural RPC will automatically pass the current Natural user ID (as
                                contained in system variable <a href="../vari/natenv.htm#USER"><code>*USER</code></a>)
                                and the password defined in Natural Security to the EntireX Broker, where they
                                are checked for conformity with the EntireX Broker security data.
                  </p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=6</code></td> 
                        
               <td> 
                  
                  <p>Support of EntireX Encryption (<code>ENCRYPTION-LEVEL</code>).
                  </p>
                            
                            
                  <p>With EntireX Broker ACI Version 6 or higher, the application
                                programming interface <a href="oper.htm#oper_usr4009n"><code>USR4009N</code></a> may be used to set
                                the ACI field <code>ENCRYPTION-LEVEL</code>.
                  </p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=7</code></td> 
                        
               <td>Support of EntireX compression (<code>COMPRESSLEVEL</code>). 
                            
                  <p>With EntireX Broker ACI Version 7 or higher, the application
                                programming interface<a href="oper.htm#oper_usr4009n"><code>USR4009N</code></a> may be used to set
                                the ACI field <code>COMPRESSLEVEL</code>.
                  </p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=8</code></td> 
                        
               <td>Support of EntireX Security without stub exits (mainframe
                  only). 
                  
                  <p>With EntireX Broker ACI Version 8 or higher, the Natural RPC
                                server issues a <code>KERNELVERS</code> call to get the correct value for the
                                ACI field <code>KERNELSECURITY</code>. In this case it is no longer required to
                                link the EntireX Security exits to the EntireX Broker stubs.
                  </p> 
               </td> 
                       
            </tr> 
                    
            <tr> 
                        
               <td><code>ACIVERS=9</code></td> 
                        
               <td>Support of EntireX application identification of the client and
                  server environment and (for servers only) of the Integrated Authentication
                  Framework (IAF). 
                  
                  <p>With EntireX Broker ACI Version 9 or higher, the EntireX Broker
                                stubs send environmental information about client and server (for example, job
                                name) to the EntireX Broker.
                  </p> 
                            
                  <p>With EntireX Broker ACI Version 9 or higher, the Natural RPC
                                server can optionally use IAF for client authentication. 
                  </p> 
                            
                  <p>For details, refer to the current EntireX
                                documentation.
                  </p>
               </td> 
                       
            </tr> 
                   
         </tbody> 
               
      </table> 
            
          
      <div><a name="setup_tcpip"></a></div> 
          
      <h3>Using TCP/IP as Transport Method</h3> 
           
           
      <p>If TCP/IP is used as transport method and you use a host name to
               address the server node, you have the following alternatives:
      </p> 
           
      <ul> 
               
         <li> 
                   
            <p class="initem">Define the server node in the Hosts and Services Directory of your
                       TCP/IP installation.
            </p> 
                  
         </li> 
               
         <li> 
                   
            <p class="initem">Use a Domain Name System (DNS) for domain name resolution.</p> 
                  
         </li> 
              
      </ul> 
          
      <div class="noprint">
         <p><a href="setup.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
      </div>
      <div><a name="setup_Setting_Up_an_EntireX_Broker_Environment"></a></div> 
         
      <h2>Setting Up an EntireX Broker Environment</h2> 
          
          
      <p>In the EntireX Broker Attribute File, add the following:</p> 
          
      <ol> 
              
         <li> 
                  
            <p class="initem">For each Natural RPC server, a service definition must be specified as
                      follows:
            </p> 
                  
            <p class="initem"> <code>CLASS=RPC, SERVICE=CALLNAT,
                  SERVER=<var>servername</var></code>.
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">If you want to use the conversion services, set
                      <code>CONVERSION=<var>userexit</var></code>. In this case, you
                      must set the profile parameter <a href="../parms/acivers.htm"></a><a href="../parms/cprpc.htm"><code>CPRPC</code></a>
                      accordingly.
            </p> 
                 
         </li> 
             
      </ol> 
          
      <p>If you want to use the reliable RPC, additional settings are required
              for each Natural RPC server that should support reliable RPC: 
      </p> 
          
      <ul> 
              
         <li> 
                  
            <p class="initem">The EntireX Broker attribute <code>MAX-UOWS</code> must be set to
                      value greater zero. 
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">The EntireX Broker attribute <code>DEFERRED</code>
                      must be set to <code>YES</code> if the client should be able to send reliable
                      RPC messages to an RPC server that is known to the EntireX Broker but has not
                      yet been started. 
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">The EntireX Broker attribute <code>STORE</code> must
                      be set to <code>BROKER</code> if recovery of reliable RPC messages after a
                      system failure should be possible. In addition, the EntireX Broker persistent
                      store must be enabled. 
            </p> 
                 
         </li> 
              
         <li> 
                  
            <p class="initem">The lifetime of the reliable RPC message itself (EntireX Broker
                      attribute <code>UWTIME</code>) and the lifetime of its status
                      (EntireX Broker attribute <code>UWSTAT-LIFETIME</code>) must
                      be adapted to your needs.
            </p> 
                 
         </li> 
             
      </ul> 
          
      <p class="note"><strong>Note:</strong><br> If <code>AUTOLOGON=NO</code> or <code>SECURITY=YES</code> is set in
              the EntireX Attribute File, you must set <code>ACIVERS=2</code> or
              higher.
      </p> 
         
      <div class="noprint">
         <div class="nospy">
            <p><a href="setup.htm#Top"><img src="../graphics/uparrow.png" alt="Top of page" height="17" width="17" border="0"></a></p>
            <table border="0" cellpadding="0" cellspacing="0" width="97%">
               <col width="15%">
               <col width="34%">
               <col width="48%">
               <tr>
                  <td class="footer"><img src="../graphics/blank.png" width="3" height="10">&nbsp;<a class="navig" target="_blank" href="http://www.softwareag.com">www.softwareag.com</a>&nbsp;
                  </td>
                  <td nowrap class="footer"><img src="../graphics/blank.png" width="3"><a class="navig" href="../general/legal.htm" target="_blank">Copyright &copy; Software AG 1992-2008. All rights reserved.&nbsp;</a></td>
                  <td class="bottomlinks" align="right" nowrap><img src="../graphics/blank.png" width="3"><a class="navig" target="_blank" href="../fts/search.htm" onclick="window.open('../fts/search.htm', 'fts', 'dependent,width=555,height=420,resizable'); return false">SEARCH</a>
                     &nbsp;&nbsp;<a class="navig" href="javascript:sized_window('../navig/navig.htm')" onclick="document.cookie='sagphdcc=../rpc/setup.htm;path=/'; window.open('../navig/navig.htm', 'nvgtr', 'dependent,width=450,height=270,resizable'); return false">CONTENTS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="http://documentation.softwareag.com/natural/nat635unx/pdf/rpc/setup.pdf">PDF PAGE</a>
                     &nbsp;&nbsp;<a class="navig" target="_blank" href="../general/print.htm">PDF BOOKS</a>&nbsp;&nbsp;&nbsp;|
                     &nbsp;&nbsp;<a class="navig" href="../overview.htm">HOME</a>
                     &nbsp;&nbsp;<a class="navig" href="rpc-over.htm">UP</a>
                     &nbsp;&nbsp;<a class="navig" href="limits.htm">PREV</a>
                     &nbsp;&nbsp;<a class="navig" href="start.htm">NEXT</a></td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>